{"version":3,"sources":["../../../../src/app/admin/page.tsx"],"sourcesContent":["\"use client\";\n\nimport Link from \"next/link\";\nimport { useEffect, useMemo, useState } from \"react\";\n\ntype Cluster = {\n  clusterId: string;\n  currentDemandScore: number;\n  previousDemandScore: number;\n  growthRate: number;\n  isSurging: boolean;\n  competitionIndex: number;\n  opportunityScore: number;\n  latitude: number;\n  longitude: number;\n};\n\nexport default function AdminOverviewPage() {\n  const [clusters, setClusters] = useState<Cluster[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    let active = true;\n\n    async function loadData() {\n      try {\n        setLoading(true);\n        setError(null);\n        const response = await fetch(\"/api/analytics/cluster-intelligence?days=14\");\n        if (!response.ok) {\n          throw new Error(\"Failed to load intelligence data\");\n        }\n        const data = (await response.json()) as { clusters?: Cluster[] };\n        if (!active) {\n          return;\n        }\n        setClusters(Array.isArray(data.clusters) ? data.clusters : []);\n      } catch (err) {\n        if (!active) {\n          return;\n        }\n        setError(err instanceof Error ? err.message : \"Unable to load admin overview\");\n      } finally {\n        if (active) {\n          setLoading(false);\n        }\n      }\n    }\n\n    void loadData();\n    return () => {\n      active = false;\n    };\n  }, []);\n\n  const metrics = useMemo(() => {\n    const totalClusters = clusters.length;\n    const surging = clusters.filter((cluster) => cluster.isSurging).length;\n    const highCompetition = clusters.filter((cluster) => cluster.competitionIndex >= 5).length;\n    const avgOpportunity =\n      totalClusters > 0\n        ? clusters.reduce((sum, cluster) => sum + cluster.opportunityScore, 0) / totalClusters\n        : 0;\n\n    return { totalClusters, surging, highCompetition, avgOpportunity };\n  }, [clusters]);\n\n  return (\n    <div className=\"space-y-8\">\n      <h1 className=\"text-5xl font-bold tracking-tight md:text-6xl\">Admin Overview</h1>\n\n      {loading ? (\n        <div className=\"rounded-2xl border border-zinc-800 bg-zinc-900/80 p-8 text-zinc-300\">\n          Loading overview...\n        </div>\n      ) : error ? (\n        <div className=\"rounded-2xl border border-red-900/40 bg-red-950/20 p-6 text-red-300\">\n          {error}\n        </div>\n      ) : (\n        <>\n          <section className=\"grid grid-cols-1 gap-6 md:grid-cols-2 xl:grid-cols-4\">\n            <MetricCard label=\"Tracked Clusters\" value={metrics.totalClusters.toString()} />\n            <MetricCard label=\"Surging Clusters\" value={metrics.surging.toString()} />\n            <MetricCard label=\"High Competition\" value={metrics.highCompetition.toString()} />\n            <MetricCard label=\"Avg Opportunity\" value={metrics.avgOpportunity.toFixed(1)} />\n          </section>\n\n          <section className=\"grid grid-cols-1 gap-6 md:grid-cols-3\">\n            <AdminLinkCard href=\"/admin/clusters\" text=\"Inspect cluster level metrics and growth.\" title=\"Clusters\" />\n            <AdminLinkCard href=\"/admin/heatmap\" text=\"Visualize spatial demand density.\" title=\"Heatmap\" />\n            <AdminLinkCard href=\"/admin/logs\" text=\"Track recent intelligence events.\" title=\"Logs\" />\n          </section>\n        </>\n      )}\n    </div>\n  );\n}\n\nfunction MetricCard({ label, value }: { label: string; value: string }) {\n  return (\n    <article className=\"rounded-2xl border border-zinc-800 bg-zinc-900/90 p-6\">\n      <p className=\"text-2xl text-zinc-400\">{label}</p>\n      <p className=\"mt-4 text-6xl font-bold text-zinc-100\">{value}</p>\n    </article>\n  );\n}\n\nfunction AdminLinkCard({\n  title,\n  text,\n  href,\n}: {\n  title: string;\n  text: string;\n  href: string;\n}) {\n  return (\n    <Link\n      className=\"rounded-2xl border border-zinc-800 bg-zinc-900/90 p-6 transition hover:border-zinc-700 hover:bg-zinc-900\"\n      href={href}\n    >\n      <p className=\"text-3xl font-semibold text-zinc-100\">{title}</p>\n      <p className=\"mt-2 text-lg text-zinc-400\">{text}</p>\n    </Link>\n  );\n}\n"],"names":[],"mappings":"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"}