{"version":3,"sources":["../../../../src/app/vendor/orders/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\nimport { authFetch } from \"@/lib/authFetch\";\n\ntype VendorOrderItem = {\n  id: number;\n  productId: number;\n  quantity: number;\n  price: number;\n};\n\ntype VendorOrder = {\n  id: number;\n  total: number;\n  status: string;\n  createdAt: string;\n  orderItems: VendorOrderItem[];\n};\n\ntype OrdersError = {\n  message?: string;\n};\n\nexport default function VendorOrdersPage() {\n  const [orders, setOrders] = useState<VendorOrder[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    let active = true;\n\n    async function loadOrders() {\n      try {\n        setLoading(true);\n        setError(null);\n\n        const response = await authFetch(\"/api/vendor/orders\");\n        const data = (await response.json()) as VendorOrder[] | OrdersError;\n        if (!response.ok) {\n          throw new Error(!Array.isArray(data) ? data.message ?? \"Failed to load orders\" : \"Failed to load orders\");\n        }\n\n        if (!active) {\n          return;\n        }\n\n        setOrders(Array.isArray(data) ? data : []);\n      } catch (err) {\n        if (!active) {\n          return;\n        }\n        setError(err instanceof Error ? err.message : \"Unable to load orders.\");\n      } finally {\n        if (active) {\n          setLoading(false);\n        }\n      }\n    }\n\n    void loadOrders();\n    return () => {\n      active = false;\n    };\n  }, []);\n\n  const totalRevenue = useMemo(\n    () => orders.reduce((sum, order) => sum + order.total, 0),\n    [orders]\n  );\n\n  const pendingOrders = useMemo(\n    () =>\n      orders.filter((order) => {\n        const status = order.status.toLowerCase();\n        return status.includes(\"pending\") || status.includes(\"process\") || status.includes(\"placed\");\n      }).length,\n    [orders]\n  );\n\n  if (loading) {\n    return (\n      <div className=\"rounded-2xl border border-zinc-800 bg-zinc-900/80 p-10 text-center text-zinc-300\">\n        Loading vendor orders...\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"rounded-2xl border border-red-900/40 bg-red-950/20 p-6 text-red-300\">\n        {error}\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-8\">\n      <div className=\"flex flex-wrap items-end justify-between gap-4\">\n        <h1 className=\"text-5xl font-bold tracking-tight md:text-6xl\">Orders</h1>\n        <div className=\"flex gap-3\">\n          <StatChip label=\"Total Revenue\" value={`$${totalRevenue.toFixed(2)}`} />\n          <StatChip label=\"Pending Orders\" value={pendingOrders.toString()} />\n        </div>\n      </div>\n\n      <section className=\"overflow-hidden rounded-3xl border border-zinc-800 bg-zinc-900/90\">\n        <div className=\"overflow-x-auto\">\n          <table className=\"min-w-full text-left text-lg\">\n            <thead>\n              <tr className=\"border-b border-zinc-800 text-zinc-400\">\n                <th className=\"px-8 py-5 font-medium\">Order ID</th>\n                <th className=\"px-8 py-5 font-medium\">Customer</th>\n                <th className=\"px-8 py-5 font-medium\">Date</th>\n                <th className=\"px-8 py-5 font-medium\">Items</th>\n                <th className=\"px-8 py-5 font-medium\">Total</th>\n                <th className=\"px-8 py-5 font-medium\">Status</th>\n                <th className=\"px-8 py-5 text-right font-medium\">Actions</th>\n              </tr>\n            </thead>\n            <tbody>\n              {orders.length === 0 ? (\n                <tr>\n                  <td className=\"px-8 py-8 text-zinc-400\" colSpan={7}>\n                    No orders yet.\n                  </td>\n                </tr>\n              ) : (\n                orders.map((order) => (\n                  <tr className=\"border-b border-zinc-800/70 last:border-b-0\" key={order.id}>\n                    <td className=\"px-8 py-6 font-semibold text-zinc-100\">ORD-{order.id}</td>\n                    <td className=\"px-8 py-6 text-zinc-200\">Customer #{order.id}</td>\n                    <td className=\"px-8 py-6 text-zinc-300\">\n                      {new Date(order.createdAt).toLocaleDateString()}\n                    </td>\n                    <td className=\"px-8 py-6 text-zinc-100\">{order.orderItems.length}</td>\n                    <td className=\"px-8 py-6 font-semibold text-zinc-100\">${order.total.toFixed(2)}</td>\n                    <td className=\"px-8 py-6\">\n                      <span className={`rounded-xl px-4 py-1.5 ${statusClass(order.status)}`}>\n                        {capitalize(order.status)}\n                      </span>\n                    </td>\n                    <td className=\"px-8 py-6 text-right\">\n                      <button\n                        className=\"text-xl font-semibold text-[#4F7CFF] transition hover:text-[#6A8CFF]\"\n                        type=\"button\"\n                      >\n                        View Details\n                      </button>\n                    </td>\n                  </tr>\n                ))\n              )}\n            </tbody>\n          </table>\n        </div>\n      </section>\n    </div>\n  );\n}\n\nfunction StatChip({ label, value }: { label: string; value: string }) {\n  return (\n    <div className=\"rounded-2xl border border-zinc-800 bg-zinc-900 px-5 py-3\">\n      <p className=\"text-sm text-zinc-400\">{label}</p>\n      <p className=\"text-4xl font-bold text-zinc-100\">{value}</p>\n    </div>\n  );\n}\n\nfunction statusClass(status: string): string {\n  const normalized = status.toLowerCase();\n  if (normalized.includes(\"completed\")) return \"bg-emerald-950/60 text-emerald-300\";\n  if (normalized.includes(\"transit\")) return \"bg-violet-950/60 text-violet-300\";\n  if (normalized.includes(\"process\")) return \"bg-blue-950/60 text-blue-300\";\n  return \"bg-amber-950/60 text-amber-300\";\n}\n\nfunction capitalize(value: string): string {\n  if (value.length === 0) {\n    return value;\n  }\n  return value.charAt(0).toUpperCase() + value.slice(1).toLowerCase();\n}\n"],"names":[],"mappings":"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"}