{"version":3,"sources":["../../../../src/app/admin/clusters/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\n\ntype Cluster = {\n  clusterId: string;\n  currentDemandScore: number;\n  previousDemandScore: number;\n  growthRate: number;\n  isSurging: boolean;\n  competitionIndex: number;\n  opportunityScore: number;\n  latitude: number;\n  longitude: number;\n};\n\nexport default function AdminClustersPage() {\n  const [clusters, setClusters] = useState<Cluster[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    let active = true;\n\n    async function loadClusters() {\n      try {\n        setLoading(true);\n        setError(null);\n        const response = await fetch(\"/api/analytics/cluster-intelligence?days=14\");\n        if (!response.ok) {\n          throw new Error(\"Failed to load clusters\");\n        }\n        const data = (await response.json()) as { clusters?: Cluster[] };\n        if (!active) {\n          return;\n        }\n        setClusters(Array.isArray(data.clusters) ? data.clusters : []);\n      } catch (err) {\n        if (!active) {\n          return;\n        }\n        setError(err instanceof Error ? err.message : \"Unable to load clusters\");\n      } finally {\n        if (active) {\n          setLoading(false);\n        }\n      }\n    }\n\n    void loadClusters();\n    return () => {\n      active = false;\n    };\n  }, []);\n\n  return (\n    <div className=\"space-y-6\">\n      <h1 className=\"text-5xl font-bold tracking-tight md:text-6xl\">Clusters</h1>\n\n      {loading ? (\n        <div className=\"rounded-2xl border border-zinc-800 bg-zinc-900/80 p-8 text-zinc-300\">\n          Loading clusters...\n        </div>\n      ) : error ? (\n        <div className=\"rounded-2xl border border-red-900/40 bg-red-950/20 p-6 text-red-300\">\n          {error}\n        </div>\n      ) : (\n        <section className=\"overflow-hidden rounded-3xl border border-zinc-800 bg-zinc-900/90\">\n          <div className=\"overflow-x-auto\">\n            <table className=\"min-w-full text-left text-lg\">\n              <thead>\n                <tr className=\"border-b border-zinc-800 text-zinc-400\">\n                  <th className=\"px-7 py-4 font-medium\">Cluster ID</th>\n                  <th className=\"px-7 py-4 font-medium\">Demand</th>\n                  <th className=\"px-7 py-4 font-medium\">Growth %</th>\n                  <th className=\"px-7 py-4 font-medium\">Competition</th>\n                  <th className=\"px-7 py-4 font-medium\">Opportunity</th>\n                  <th className=\"px-7 py-4 font-medium\">Status</th>\n                </tr>\n              </thead>\n              <tbody>\n                {clusters.length === 0 ? (\n                  <tr>\n                    <td className=\"px-7 py-6 text-zinc-400\" colSpan={6}>\n                      No clusters available.\n                    </td>\n                  </tr>\n                ) : (\n                  clusters.map((cluster) => (\n                    <tr className=\"border-b border-zinc-800/60 last:border-b-0\" key={cluster.clusterId}>\n                      <td className=\"px-7 py-5 font-semibold text-zinc-100\">{cluster.clusterId}</td>\n                      <td className=\"px-7 py-5 text-zinc-200\">{cluster.currentDemandScore.toFixed(2)}</td>\n                      <td className=\"px-7 py-5 text-zinc-200\">{cluster.growthRate.toFixed(1)}%</td>\n                      <td className=\"px-7 py-5 text-zinc-200\">{cluster.competitionIndex.toFixed(2)}</td>\n                      <td className=\"px-7 py-5 text-zinc-200\">{cluster.opportunityScore.toFixed(2)}</td>\n                      <td className=\"px-7 py-5\">\n                        <span\n                          className={`rounded-lg px-3 py-1 text-sm ${\n                            cluster.isSurging\n                              ? \"bg-emerald-950/60 text-emerald-300\"\n                              : \"bg-zinc-800 text-zinc-300\"\n                          }`}\n                        >\n                          {cluster.isSurging ? \"Surging\" : \"Stable\"}\n                        </span>\n                      </td>\n                    </tr>\n                  ))\n                )}\n              </tbody>\n            </table>\n          </div>\n        </section>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}