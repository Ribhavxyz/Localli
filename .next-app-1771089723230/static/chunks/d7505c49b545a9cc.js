(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,57774,e=>{"use strict";var t=e.i(43476),l=e.i(71645),a=e.i(18566),n=e.i(54338);async function r(e){let t=await fetch("/api/auth/me",{headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw Error("Unable to resolve user role");let l=await t.json();if("CUSTOMER"!==l.user.role&&"VENDOR"!==l.user.role&&"ADMIN"!==l.user.role)throw Error("Invalid user role");return l.user.role}function i(){let e=(0,a.useRouter)(),{login:i}=(0,n.useAuth)(),[o,s]=(0,l.useState)(""),[c,d]=(0,l.useState)(""),[u,x]=(0,l.useState)(""),[m,h]=(0,l.useState)("CUSTOMER"),[p,b]=(0,l.useState)(!1),[g,f]=(0,l.useState)(null);async function w(t){t.preventDefault(),b(!0),f(null);try{let t=await fetch("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:o.trim(),email:c,password:u,role:m})}),l=await t.json();if(!t.ok)throw Error(l.message??"Unable to sign up. Please try again.");let a=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:c,password:u})}),n=await a.json();if(!a.ok||!n.token)throw Error(n.message??"Account created, but auto login failed.");let s=await r(n.token);i(n.token,s),"VENDOR"===s?e.replace("/vendor"):e.replace("/")}catch(e){f(e instanceof Error?e.message:"Unable to sign up. Please try again.")}finally{b(!1)}}return(0,t.jsx)("div",{className:"min-h-screen bg-black px-6 py-16",children:(0,t.jsxs)("div",{className:"mx-auto max-w-7xl",children:[(0,t.jsxs)("div",{className:"mx-auto max-w-xl text-center",children:[(0,t.jsx)("h1",{className:"text-5xl font-bold tracking-tight text-white md:text-6xl",children:"Get Started"}),(0,t.jsx)("p",{className:"mt-3 text-xl text-zinc-400 md:text-2xl",children:"Create your Localli account"})]}),(0,t.jsxs)("div",{className:"mx-auto mt-10 w-full max-w-[560px] rounded-3xl border border-zinc-800 bg-zinc-900/90 p-8 md:p-10",children:[(0,t.jsxs)("form",{className:"space-y-6",onSubmit:w,children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"mb-2 block text-sm font-medium text-zinc-400",htmlFor:"name",children:"Full Name"}),(0,t.jsx)("input",{className:"w-full rounded-xl border border-zinc-800 bg-black px-5 py-4 text-2xl text-white outline-none ring-[#4F7CFF] placeholder:text-zinc-500 focus:ring-2",id:"name",onChange:e=>s(e.target.value),placeholder:"John Doe",required:!0,type:"text",value:o})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"mb-2 block text-sm font-medium text-zinc-400",htmlFor:"email",children:"Email"}),(0,t.jsx)("input",{className:"w-full rounded-xl border border-zinc-800 bg-black px-5 py-4 text-2xl text-white outline-none ring-[#4F7CFF] placeholder:text-zinc-500 focus:ring-2",id:"email",onChange:e=>d(e.target.value),placeholder:"you@example.com",required:!0,type:"email",value:c})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"mb-2 block text-sm font-medium text-zinc-400",htmlFor:"password",children:"Password"}),(0,t.jsx)("input",{className:"w-full rounded-xl border border-zinc-800 bg-black px-5 py-4 text-2xl text-white outline-none ring-[#4F7CFF] placeholder:text-zinc-500 focus:ring-2",id:"password",minLength:6,onChange:e=>x(e.target.value),required:!0,type:"password",value:u})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"mb-2 block text-sm font-medium text-zinc-400",htmlFor:"role",children:"I want to"}),(0,t.jsxs)("select",{className:"w-full rounded-xl border border-zinc-800 bg-black px-5 py-4 text-2xl text-white outline-none ring-[#4F7CFF] focus:ring-2",id:"role",onChange:e=>h(e.target.value),value:m,children:[(0,t.jsx)("option",{value:"CUSTOMER",children:"Shop locally"}),(0,t.jsx)("option",{value:"VENDOR",children:"Sell as a vendor"})]})]}),g?(0,t.jsx)("p",{className:"text-lg text-[#FF453A]",children:g}):null,(0,t.jsx)("button",{className:"w-full rounded-xl bg-[#4F7CFF] px-5 py-4 text-3xl font-semibold text-white transition hover:bg-[#3f6ef2] disabled:cursor-not-allowed disabled:opacity-60",disabled:p,type:"submit",children:p?"Creating account...":"Create Account"})]}),(0,t.jsxs)("p",{className:"mt-6 text-center text-lg text-zinc-400",children:["Already have an account?"," ",(0,t.jsx)("a",{className:"text-[#4F7CFF] transition hover:text-[#6A8CFF]",href:"/login",children:"Sign in"})]})]})]})})}e.s(["default",()=>i])}]);