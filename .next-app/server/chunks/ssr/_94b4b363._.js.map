{"version":3,"sources":["../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-dom.ts","../../../../node_modules/%40swc/helpers/cjs/_interop_require_default.cjs","../../../../src/components/products/AddToCartButton.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactDOM\n","\"use strict\";\n\nfunction _interop_require_default(obj) {\n    return obj && obj.__esModule ? obj : { default: obj };\n}\nexports._ = _interop_require_default;\n","\"use client\";\n\nimport { useState } from \"react\";\nimport { authFetch } from \"@/lib/authFetch\";\n\ninterface AddToCartButtonProps {\n  productId: number;\n  inStock: boolean;\n}\n\ntype ApiResponse = {\n  message?: string;\n};\n\nexport default function AddToCartButton({ productId, inStock }: AddToCartButtonProps) {\n  const [pending, setPending] = useState(false);\n  const [message, setMessage] = useState<string | null>(null);\n  const [isError, setIsError] = useState(false);\n\n  async function handleAddToCart() {\n    try {\n      setPending(true);\n      setMessage(null);\n      setIsError(false);\n\n      const response = await authFetch(\"/api/cart\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          productId,\n          quantity: 1,\n        }),\n      });\n\n      const data = (await response.json()) as ApiResponse;\n      if (!response.ok) {\n        throw new Error(data.message ?? \"Failed to add item to cart.\");\n      }\n\n      setMessage(\"Added to cart.\");\n      setIsError(false);\n    } catch (err) {\n      const errorMessage =\n        err instanceof Error ? err.message : \"Unable to add item to cart right now.\";\n      setMessage(errorMessage);\n      setIsError(true);\n    } finally {\n      setPending(false);\n    }\n  }\n\n  return (\n    <div className=\"mt-6\">\n      <button\n        className=\"rounded-lg bg-[#4F7CFF] px-5 py-2.5 text-sm font-medium text-white transition hover:bg-[#3f6ef2] disabled:cursor-not-allowed disabled:bg-zinc-700 disabled:text-zinc-400\"\n        disabled={!inStock || pending}\n        onClick={() => void handleAddToCart()}\n        type=\"button\"\n      >\n        {pending ? \"Adding...\" : \"Add to Cart\"}\n      </button>\n\n      {message ? (\n        <p className={`mt-3 text-sm ${isError ? \"text-[#FF453A]\" : \"text-[#30D158]\"}`}>\n          {message}\n        </p>\n      ) : null}\n    </div>\n  );\n}\n"],"names":["module","exports","require","vendored","ReactDOM"],"mappings":"6CAAAA,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,YAAY,CAAEC,QAAQ,+BCGjC,EAAQ,CAAC,CAHT,EAGY,OAHH,AAAyB,CAAG,EACjC,OAAO,GAAO,EAAI,UAAU,CAAG,EAAM,CAAE,QAAS,CAAI,CACxD,0CCFA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAWe,SAAS,EAAgB,WAAE,CAAS,SAAE,CAAO,CAAwB,EAClF,GAAM,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACjC,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAChD,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAEvC,eAAe,IACb,GAAI,CACF,EAAW,IACX,EAAW,MACX,GAAW,GAEX,IAAM,EAAW,MAAM,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,YAAa,CAC5C,OAAQ,OACR,QAAS,CACP,eAAgB,kBAClB,EACA,KAAM,KAAK,SAAS,CAAC,CACnB,YACA,SAAU,CACZ,EACF,GAEM,EAAQ,MAAM,EAAS,IAAI,GACjC,GAAI,CAAC,EAAS,EAAE,CACd,CADgB,KACV,AAAI,MAAM,EAAK,OAAO,EAAI,+BAGlC,EAAW,kBACX,GAAW,EACb,CAAE,MAAO,EAAK,CAGZ,EADE,SACS,IADM,MAAQ,EAAI,OAAO,CAAG,yCAEvC,GAAW,EACb,QAAU,CACR,GAAW,EACb,CACF,CAEA,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iBACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,UAAU,2KACV,SAAU,CAAC,GAAW,EACtB,QAAS,IAAM,KAAK,IACpB,KAAK,kBAEJ,EAAU,YAAc,gBAG1B,EACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,aAAa,EAAE,EAAU,iBAAmB,iBAAA,CAAkB,UAC1E,IAED,OAGV","ignoreList":[0,1]}