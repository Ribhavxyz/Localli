{"version":3,"sources":["../../../../src/app/vendor/store/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { authFetch } from \"@/lib/authFetch\";\n\ninterface Store {\n  name: string;\n  description: string;\n  latitude: number;\n  longitude: number;\n}\n\ninterface StoreResponse {\n  store?: Store;\n  message?: string;\n}\n\nfunction isValidLatitude(value: number): boolean {\n  return Number.isFinite(value) && value >= -90 && value <= 90;\n}\n\nfunction isValidLongitude(value: number): boolean {\n  return Number.isFinite(value) && value >= -180 && value <= 180;\n}\n\nexport default function VendorStoreCreatePage() {\n  const router = useRouter();\n  const [name, setName] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [latitude, setLatitude] = useState(\"\");\n  const [longitude, setLongitude] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  async function handleSubmit(event: React.FormEvent<HTMLFormElement>) {\n    event.preventDefault();\n    setError(null);\n\n    const parsedLatitude = Number(latitude);\n    const parsedLongitude = Number(longitude);\n\n    if (!isValidLatitude(parsedLatitude)) {\n      setError(\"Please enter a valid latitude between -90 and 90.\");\n      return;\n    }\n\n    if (!isValidLongitude(parsedLongitude)) {\n      setError(\"Please enter a valid longitude between -180 and 180.\");\n      return;\n    }\n\n    try {\n      setLoading(true);\n\n      const response = await authFetch(\"/api/vendor/store\", {\n  method: \"POST\",\n  headers: {\n    \"Content-Type\": \"application/json\",\n  },\n  body: JSON.stringify({\n    name: name.trim(),\n    lat: Number(latitude),\n    lng: Number(longitude),\n    description: description.trim() || undefined,\n  }),\n});\n\n\n      const data = (await response.json()) as StoreResponse;\n\n      if (!response.ok) {\n        throw new Error(data.message ?? \"Failed to create store\");\n      }\n\n      router.replace(\"/vendor/products\");\n    } catch (err) {\n      const message =\n        err instanceof Error ? err.message : \"Failed to create store. Please try again.\";\n      setError(message);\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  return (\n    <div className=\"mx-auto w-full max-w-xl\">\n      <div className=\"rounded-xl border border-zinc-800 bg-zinc-900 p-6 shadow-sm\">\n        <h2 className=\"text-xl font-semibold text-zinc-100\">Create Store</h2>\n        <p className=\"mt-1 text-sm text-zinc-400\">\n          Add your store details to start listing products.\n        </p>\n\n        <form className=\"mt-6 space-y-4\" onSubmit={handleSubmit}>\n          <div>\n            <label className=\"mb-1 block text-sm text-zinc-300\" htmlFor=\"store-name\">\n              Store Name\n            </label>\n            <input\n              className=\"w-full rounded-lg border border-zinc-700 bg-zinc-950 px-3 py-2 text-sm text-white outline-none ring-[#4F7CFF] transition focus:ring-2\"\n              id=\"store-name\"\n              onChange={(event) => setName(event.target.value)}\n              required\n              type=\"text\"\n              value={name}\n            />\n          </div>\n\n          <div>\n            <label className=\"mb-1 block text-sm text-zinc-300\" htmlFor=\"store-description\">\n              Description\n            </label>\n            <textarea\n              className=\"min-h-24 w-full rounded-lg border border-zinc-700 bg-zinc-950 px-3 py-2 text-sm text-white outline-none ring-[#4F7CFF] transition focus:ring-2\"\n              id=\"store-description\"\n              onChange={(event) => setDescription(event.target.value)}\n              required\n              value={description}\n            />\n          </div>\n\n          <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2\">\n            <div>\n              <label className=\"mb-1 block text-sm text-zinc-300\" htmlFor=\"store-latitude\">\n                Latitude\n              </label>\n              <input\n                className=\"w-full rounded-lg border border-zinc-700 bg-zinc-950 px-3 py-2 text-sm text-white outline-none ring-[#4F7CFF] transition focus:ring-2\"\n                id=\"store-latitude\"\n                inputMode=\"decimal\"\n                onChange={(event) => setLatitude(event.target.value)}\n                placeholder=\"e.g. 28.6139\"\n                required\n                type=\"text\"\n                value={latitude}\n              />\n            </div>\n\n            <div>\n              <label className=\"mb-1 block text-sm text-zinc-300\" htmlFor=\"store-longitude\">\n                Longitude\n              </label>\n              <input\n                className=\"w-full rounded-lg border border-zinc-700 bg-zinc-950 px-3 py-2 text-sm text-white outline-none ring-[#4F7CFF] transition focus:ring-2\"\n                id=\"store-longitude\"\n                inputMode=\"decimal\"\n                onChange={(event) => setLongitude(event.target.value)}\n                placeholder=\"e.g. 77.2090\"\n                required\n                type=\"text\"\n                value={longitude}\n              />\n            </div>\n          </div>\n\n          {error ? <p className=\"text-sm text-[#FF453A]\">{error}</p> : null}\n\n          <button\n            className=\"w-full rounded-lg bg-[#4F7CFF] px-4 py-2 text-sm font-medium text-white transition hover:bg-[#3f6ef2] disabled:cursor-not-allowed disabled:opacity-60\"\n            disabled={loading}\n            type=\"submit\"\n          >\n            {loading ? \"Creating store...\" : \"Create Store\"}\n          </button>\n        </form>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}