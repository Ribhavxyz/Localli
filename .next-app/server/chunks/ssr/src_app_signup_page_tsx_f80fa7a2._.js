module.exports=[2246,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(32636);async function f(a){let b=await fetch("/api/auth/me",{headers:{Authorization:`Bearer ${a}`}});if(!b.ok)throw Error("Unable to resolve user role");let c=await b.json();if("CUSTOMER"!==c.user.role&&"VENDOR"!==c.user.role&&"ADMIN"!==c.user.role)throw Error("Invalid user role");return c.user.role}function g(){let a=(0,d.useRouter)(),{login:g}=(0,e.useAuth)(),[h,i]=(0,c.useState)(""),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)(""),[n,o]=(0,c.useState)("CUSTOMER"),[p,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)(null);async function t(b){b.preventDefault(),q(!0),s(null);try{let b=await fetch("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:h.trim(),email:j,password:l,role:n})}),c=await b.json();if(!b.ok)throw Error(c.message??"Unable to sign up. Please try again.");let d=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:j,password:l})}),e=await d.json();if(!d.ok||!e.token)throw Error(e.message??"Account created, but auto login failed.");let i=await f(e.token);g(e.token,i),"VENDOR"===i?a.replace("/vendor"):a.replace("/")}catch(a){s(a instanceof Error?a.message:"Unable to sign up. Please try again.")}finally{q(!1)}}return(0,b.jsx)("div",{className:"min-h-screen bg-black px-6 py-16",children:(0,b.jsxs)("div",{className:"mx-auto max-w-7xl",children:[(0,b.jsxs)("div",{className:"mx-auto max-w-xl text-center",children:[(0,b.jsx)("h1",{className:"text-5xl font-bold tracking-tight text-white md:text-6xl",children:"Get Started"}),(0,b.jsx)("p",{className:"mt-3 text-xl text-zinc-400 md:text-2xl",children:"Create your Localli account"})]}),(0,b.jsxs)("div",{className:"mx-auto mt-10 w-full max-w-[560px] rounded-3xl border border-zinc-800 bg-zinc-900/90 p-8 md:p-10",children:[(0,b.jsxs)("form",{className:"space-y-6",onSubmit:t,children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"mb-2 block text-sm font-medium text-zinc-400",htmlFor:"name",children:"Full Name"}),(0,b.jsx)("input",{className:"w-full rounded-xl border border-zinc-800 bg-black px-5 py-4 text-2xl text-white outline-none ring-[#4F7CFF] placeholder:text-zinc-500 focus:ring-2",id:"name",onChange:a=>i(a.target.value),placeholder:"John Doe",required:!0,type:"text",value:h})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"mb-2 block text-sm font-medium text-zinc-400",htmlFor:"email",children:"Email"}),(0,b.jsx)("input",{className:"w-full rounded-xl border border-zinc-800 bg-black px-5 py-4 text-2xl text-white outline-none ring-[#4F7CFF] placeholder:text-zinc-500 focus:ring-2",id:"email",onChange:a=>k(a.target.value),placeholder:"you@example.com",required:!0,type:"email",value:j})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"mb-2 block text-sm font-medium text-zinc-400",htmlFor:"password",children:"Password"}),(0,b.jsx)("input",{className:"w-full rounded-xl border border-zinc-800 bg-black px-5 py-4 text-2xl text-white outline-none ring-[#4F7CFF] placeholder:text-zinc-500 focus:ring-2",id:"password",minLength:6,onChange:a=>m(a.target.value),required:!0,type:"password",value:l})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"mb-2 block text-sm font-medium text-zinc-400",htmlFor:"role",children:"I want to"}),(0,b.jsxs)("select",{className:"w-full rounded-xl border border-zinc-800 bg-black px-5 py-4 text-2xl text-white outline-none ring-[#4F7CFF] focus:ring-2",id:"role",onChange:a=>o(a.target.value),value:n,children:[(0,b.jsx)("option",{value:"CUSTOMER",children:"Shop locally"}),(0,b.jsx)("option",{value:"VENDOR",children:"Sell as a vendor"})]})]}),r?(0,b.jsx)("p",{className:"text-lg text-[#FF453A]",children:r}):null,(0,b.jsx)("button",{className:"w-full rounded-xl bg-[#4F7CFF] px-5 py-4 text-3xl font-semibold text-white transition hover:bg-[#3f6ef2] disabled:cursor-not-allowed disabled:opacity-60",disabled:p,type:"submit",children:p?"Creating account...":"Create Account"})]}),(0,b.jsxs)("p",{className:"mt-6 text-center text-lg text-zinc-400",children:["Already have an account?"," ",(0,b.jsx)("a",{className:"text-[#4F7CFF] transition hover:text-[#6A8CFF]",href:"/login",children:"Sign in"})]})]})]})})}a.s(["default",()=>g])}];

//# sourceMappingURL=src_app_signup_page_tsx_f80fa7a2._.js.map