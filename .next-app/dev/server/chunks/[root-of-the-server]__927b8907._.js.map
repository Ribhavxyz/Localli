{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Ribhav/OneDrive/Documents/Projects/Major%20project%20final/localli/src/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from \"@prisma/client\";\r\n\r\nconst globalForPrisma = global as unknown as { prisma: PrismaClient };\r\n\r\nexport const prisma =\r\n  globalForPrisma.prisma ||\r\n  new PrismaClient({\r\n    log: [\"query\"],\r\n  });\r\n\r\nif (process.env.NODE_ENV !== \"production\")\r\n  globalForPrisma.prisma = prisma;\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM;AAEC,MAAM,SACX,gBAAgB,MAAM,IACtB,IAAI,sMAAY,CAAC;IACf,KAAK;QAAC;KAAQ;AAChB;AAEF,wCACE,gBAAgB,MAAM,GAAG"}},
    {"offset": {"line": 69, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Ribhav/OneDrive/Documents/Projects/Major%20project%20final/localli/src/app/api/auth/signup/route.ts"],"sourcesContent":["import bcrypt from \"bcryptjs\";\nimport { Prisma } from \"@prisma/client\";\nimport { NextRequest, NextResponse } from \"next/server\";\nimport { prisma } from \"@/lib/prisma\";\n\ntype SignupBody = {\n  name?: string;\n  email?: string;\n  password?: string;\n  role?: \"CUSTOMER\" | \"VENDOR\" | \"ADMIN\";\n};\n\nexport async function POST(request: NextRequest) {\n  try {\n    const body = (await request.json()) as SignupBody;\n\n    const name = body.name?.trim();\n    const email = body.email?.trim().toLowerCase();\n    const password = body.password;\n    const role = body.role;\n\n    if (!name || !email || !password || !role) {\n      return NextResponse.json(\n        { message: \"name, email, password, and role are required\" },\n        { status: 400 }\n      );\n    }\n\n    if (role === \"ADMIN\") {\n      return NextResponse.json(\n        { message: \"ADMIN signup is disabled. Use seed or admin-only route.\" },\n        { status: 403 }\n      );\n    }\n\n    if (role !== \"CUSTOMER\" && role !== \"VENDOR\") {\n      return NextResponse.json(\n        { message: \"role must be CUSTOMER or VENDOR\" },\n        { status: 400 }\n      );\n    }\n\n    const hashedPassword = await bcrypt.hash(password, 10);\n\n    const user = await prisma.user.create({\n      data: {\n        name,\n        email,\n        password: hashedPassword,\n        role,\n      },\n      select: {\n        id: true,\n      },\n    });\n\n    return NextResponse.json(\n      { message: \"User created successfully\", userId: user.id },\n      { status: 201 }\n    );\n  } catch (error) {\n    if (\n      error instanceof Prisma.PrismaClientKnownRequestError &&\n      error.code === \"P2002\"\n    ) {\n      return NextResponse.json(\n        { message: \"Email already exists\" },\n        { status: 409 }\n      );\n    }\n\n    return NextResponse.json({ message: \"Invalid request body\" }, { status: 400 });\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;;;;;AASO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,OAAQ,MAAM,QAAQ,IAAI;QAEhC,MAAM,OAAO,KAAK,IAAI,EAAE;QACxB,MAAM,QAAQ,KAAK,KAAK,EAAE,OAAO;QACjC,MAAM,WAAW,KAAK,QAAQ;QAC9B,MAAM,OAAO,KAAK,IAAI;QAEtB,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,YAAY,CAAC,MAAM;YACzC,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,SAAS;YAA+C,GAC1D;gBAAE,QAAQ;YAAI;QAElB;QAEA,IAAI,SAAS,SAAS;YACpB,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,SAAS;YAA0D,GACrE;gBAAE,QAAQ;YAAI;QAElB;QAEA,IAAI,SAAS,cAAc,SAAS,UAAU;YAC5C,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,SAAS;YAAkC,GAC7C;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,iBAAiB,MAAM,8IAAM,CAAC,IAAI,CAAC,UAAU;QAEnD,MAAM,OAAO,MAAM,gIAAM,CAAC,IAAI,CAAC,MAAM,CAAC;YACpC,MAAM;gBACJ;gBACA;gBACA,UAAU;gBACV;YACF;YACA,QAAQ;gBACN,IAAI;YACN;QACF;QAEA,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,SAAS;YAA6B,QAAQ,KAAK,EAAE;QAAC,GACxD;YAAE,QAAQ;QAAI;IAElB,EAAE,OAAO,OAAO;QACd,IACE,iBAAiB,gMAAM,CAAC,6BAA6B,IACrD,MAAM,IAAI,KAAK,SACf;YACA,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,SAAS;YAAuB,GAClC;gBAAE,QAAQ;YAAI;QAElB;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAAuB,GAAG;YAAE,QAAQ;QAAI;IAC9E;AACF"}}]
}