{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Ribhav/OneDrive/Documents/Projects/Major%20project%20final/localli/src/app/admin/page.tsx"],"sourcesContent":["\"use client\";\n\nimport Link from \"next/link\";\nimport { useEffect, useMemo, useState } from \"react\";\n\ntype Cluster = {\n  clusterId: string;\n  currentDemandScore: number;\n  previousDemandScore: number;\n  growthRate: number;\n  isSurging: boolean;\n  competitionIndex: number;\n  opportunityScore: number;\n  latitude: number;\n  longitude: number;\n};\n\nexport default function AdminOverviewPage() {\n  const [clusters, setClusters] = useState<Cluster[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    let active = true;\n\n    async function loadData() {\n      try {\n        setLoading(true);\n        setError(null);\n        const response = await fetch(\"/api/analytics/cluster-intelligence?days=14\");\n        if (!response.ok) {\n          throw new Error(\"Failed to load intelligence data\");\n        }\n        const data = (await response.json()) as { clusters?: Cluster[] };\n        if (!active) {\n          return;\n        }\n        setClusters(Array.isArray(data.clusters) ? data.clusters : []);\n      } catch (err) {\n        if (!active) {\n          return;\n        }\n        setError(err instanceof Error ? err.message : \"Unable to load admin overview\");\n      } finally {\n        if (active) {\n          setLoading(false);\n        }\n      }\n    }\n\n    void loadData();\n    return () => {\n      active = false;\n    };\n  }, []);\n\n  const metrics = useMemo(() => {\n    const totalClusters = clusters.length;\n    const surging = clusters.filter((cluster) => cluster.isSurging).length;\n    const highCompetition = clusters.filter((cluster) => cluster.competitionIndex >= 5).length;\n    const avgOpportunity =\n      totalClusters > 0\n        ? clusters.reduce((sum, cluster) => sum + cluster.opportunityScore, 0) / totalClusters\n        : 0;\n\n    return { totalClusters, surging, highCompetition, avgOpportunity };\n  }, [clusters]);\n\n  return (\n    <div className=\"space-y-8\">\n      <h1 className=\"text-5xl font-bold tracking-tight md:text-6xl\">Admin Overview</h1>\n\n      {loading ? (\n        <div className=\"rounded-2xl border border-zinc-800 bg-zinc-900/80 p-8 text-zinc-300\">\n          Loading overview...\n        </div>\n      ) : error ? (\n        <div className=\"rounded-2xl border border-red-900/40 bg-red-950/20 p-6 text-red-300\">\n          {error}\n        </div>\n      ) : (\n        <>\n          <section className=\"grid grid-cols-1 gap-6 md:grid-cols-2 xl:grid-cols-4\">\n            <MetricCard label=\"Tracked Clusters\" value={metrics.totalClusters.toString()} />\n            <MetricCard label=\"Surging Clusters\" value={metrics.surging.toString()} />\n            <MetricCard label=\"High Competition\" value={metrics.highCompetition.toString()} />\n            <MetricCard label=\"Avg Opportunity\" value={metrics.avgOpportunity.toFixed(1)} />\n          </section>\n\n          <section className=\"grid grid-cols-1 gap-6 md:grid-cols-3\">\n            <AdminLinkCard href=\"/admin/clusters\" text=\"Inspect cluster level metrics and growth.\" title=\"Clusters\" />\n            <AdminLinkCard href=\"/admin/heatmap\" text=\"Visualize spatial demand density.\" title=\"Heatmap\" />\n            <AdminLinkCard href=\"/admin/logs\" text=\"Track recent intelligence events.\" title=\"Logs\" />\n          </section>\n        </>\n      )}\n    </div>\n  );\n}\n\nfunction MetricCard({ label, value }: { label: string; value: string }) {\n  return (\n    <article className=\"rounded-2xl border border-zinc-800 bg-zinc-900/90 p-6\">\n      <p className=\"text-2xl text-zinc-400\">{label}</p>\n      <p className=\"mt-4 text-6xl font-bold text-zinc-100\">{value}</p>\n    </article>\n  );\n}\n\nfunction AdminLinkCard({\n  title,\n  text,\n  href,\n}: {\n  title: string;\n  text: string;\n  href: string;\n}) {\n  return (\n    <Link\n      className=\"rounded-2xl border border-zinc-800 bg-zinc-900/90 p-6 transition hover:border-zinc-700 hover:bg-zinc-900\"\n      href={href}\n    >\n      <p className=\"text-3xl font-semibold text-zinc-100\">{title}</p>\n      <p className=\"mt-2 text-lg text-zinc-400\">{text}</p>\n    </Link>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAiBe,SAAS;IACtB,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAY,EAAE;IACtD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAgB;IAElD,IAAA,kNAAS,EAAC;QACR,IAAI,SAAS;QAEb,eAAe;YACb,IAAI;gBACF,WAAW;gBACX,SAAS;gBACT,MAAM,WAAW,MAAM,MAAM;gBAC7B,IAAI,CAAC,SAAS,EAAE,EAAE;oBAChB,MAAM,IAAI,MAAM;gBAClB;gBACA,MAAM,OAAQ,MAAM,SAAS,IAAI;gBACjC,IAAI,CAAC,QAAQ;oBACX;gBACF;gBACA,YAAY,MAAM,OAAO,CAAC,KAAK,QAAQ,IAAI,KAAK,QAAQ,GAAG,EAAE;YAC/D,EAAE,OAAO,KAAK;gBACZ,IAAI,CAAC,QAAQ;oBACX;gBACF;gBACA,SAAS,eAAe,QAAQ,IAAI,OAAO,GAAG;YAChD,SAAU;gBACR,IAAI,QAAQ;oBACV,WAAW;gBACb;YACF;QACF;QAEA,KAAK;QACL,OAAO;YACL,SAAS;QACX;IACF,GAAG,EAAE;IAEL,MAAM,UAAU,IAAA,gNAAO,EAAC;QACtB,MAAM,gBAAgB,SAAS,MAAM;QACrC,MAAM,UAAU,SAAS,MAAM,CAAC,CAAC,UAAY,QAAQ,SAAS,EAAE,MAAM;QACtE,MAAM,kBAAkB,SAAS,MAAM,CAAC,CAAC,UAAY,QAAQ,gBAAgB,IAAI,GAAG,MAAM;QAC1F,MAAM,iBACJ,gBAAgB,IACZ,SAAS,MAAM,CAAC,CAAC,KAAK,UAAY,MAAM,QAAQ,gBAAgB,EAAE,KAAK,gBACvE;QAEN,OAAO;YAAE;YAAe;YAAS;YAAiB;QAAe;IACnE,GAAG;QAAC;KAAS;IAEb,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAAgD;;;;;;YAE7D,wBACC,8OAAC;gBAAI,WAAU;0BAAsE;;;;;uBAGnF,sBACF,8OAAC;gBAAI,WAAU;0BACZ;;;;;qCAGH;;kCACE,8OAAC;wBAAQ,WAAU;;0CACjB,8OAAC;gCAAW,OAAM;gCAAmB,OAAO,QAAQ,aAAa,CAAC,QAAQ;;;;;;0CAC1E,8OAAC;gCAAW,OAAM;gCAAmB,OAAO,QAAQ,OAAO,CAAC,QAAQ;;;;;;0CACpE,8OAAC;gCAAW,OAAM;gCAAmB,OAAO,QAAQ,eAAe,CAAC,QAAQ;;;;;;0CAC5E,8OAAC;gCAAW,OAAM;gCAAkB,OAAO,QAAQ,cAAc,CAAC,OAAO,CAAC;;;;;;;;;;;;kCAG5E,8OAAC;wBAAQ,WAAU;;0CACjB,8OAAC;gCAAc,MAAK;gCAAkB,MAAK;gCAA4C,OAAM;;;;;;0CAC7F,8OAAC;gCAAc,MAAK;gCAAiB,MAAK;gCAAoC,OAAM;;;;;;0CACpF,8OAAC;gCAAc,MAAK;gCAAc,MAAK;gCAAoC,OAAM;;;;;;;;;;;;;;;;;;;;AAM7F;AAEA,SAAS,WAAW,EAAE,KAAK,EAAE,KAAK,EAAoC;IACpE,qBACE,8OAAC;QAAQ,WAAU;;0BACjB,8OAAC;gBAAE,WAAU;0BAA0B;;;;;;0BACvC,8OAAC;gBAAE,WAAU;0BAAyC;;;;;;;;;;;;AAG5D;AAEA,SAAS,cAAc,EACrB,KAAK,EACL,IAAI,EACJ,IAAI,EAKL;IACC,qBACE,8OAAC,uKAAI;QACH,WAAU;QACV,MAAM;;0BAEN,8OAAC;gBAAE,WAAU;0BAAwC;;;;;;0BACrD,8OAAC;gBAAE,WAAU;0BAA8B;;;;;;;;;;;;AAGjD"}}]
}