{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Ribhav/OneDrive/Documents/Projects/Major%20project%20final/localli/src/app/vendor/orders/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\nimport { authFetch } from \"@/lib/authFetch\";\n\ntype VendorOrderItem = {\n  id: number;\n  productId: number;\n  quantity: number;\n  price: number;\n};\n\ntype VendorOrder = {\n  id: number;\n  total: number;\n  status: string;\n  createdAt: string;\n  orderItems: VendorOrderItem[];\n};\n\ntype OrdersError = {\n  message?: string;\n};\n\nexport default function VendorOrdersPage() {\n  const [orders, setOrders] = useState<VendorOrder[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    let active = true;\n\n    async function loadOrders() {\n      try {\n        setLoading(true);\n        setError(null);\n\n        const response = await authFetch(\"/api/vendor/orders\");\n        const data = (await response.json()) as VendorOrder[] | OrdersError;\n        if (!response.ok) {\n          throw new Error(!Array.isArray(data) ? data.message ?? \"Failed to load orders\" : \"Failed to load orders\");\n        }\n\n        if (!active) {\n          return;\n        }\n\n        setOrders(Array.isArray(data) ? data : []);\n      } catch (err) {\n        if (!active) {\n          return;\n        }\n        setError(err instanceof Error ? err.message : \"Unable to load orders.\");\n      } finally {\n        if (active) {\n          setLoading(false);\n        }\n      }\n    }\n\n    void loadOrders();\n    return () => {\n      active = false;\n    };\n  }, []);\n\n  const totalRevenue = useMemo(\n    () => orders.reduce((sum, order) => sum + order.total, 0),\n    [orders]\n  );\n\n  const pendingOrders = useMemo(\n    () =>\n      orders.filter((order) => {\n        const status = order.status.toLowerCase();\n        return status.includes(\"pending\") || status.includes(\"process\") || status.includes(\"placed\");\n      }).length,\n    [orders]\n  );\n\n  if (loading) {\n    return (\n      <div className=\"rounded-2xl border border-zinc-800 bg-zinc-900/80 p-10 text-center text-zinc-300\">\n        Loading vendor orders...\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"rounded-2xl border border-red-900/40 bg-red-950/20 p-6 text-red-300\">\n        {error}\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-8\">\n      <div className=\"flex flex-wrap items-end justify-between gap-4\">\n        <h1 className=\"text-5xl font-bold tracking-tight md:text-6xl\">Orders</h1>\n        <div className=\"flex gap-3\">\n          <StatChip label=\"Total Revenue\" value={`$${totalRevenue.toFixed(2)}`} />\n          <StatChip label=\"Pending Orders\" value={pendingOrders.toString()} />\n        </div>\n      </div>\n\n      <section className=\"overflow-hidden rounded-3xl border border-zinc-800 bg-zinc-900/90\">\n        <div className=\"overflow-x-auto\">\n          <table className=\"min-w-full text-left text-lg\">\n            <thead>\n              <tr className=\"border-b border-zinc-800 text-zinc-400\">\n                <th className=\"px-8 py-5 font-medium\">Order ID</th>\n                <th className=\"px-8 py-5 font-medium\">Customer</th>\n                <th className=\"px-8 py-5 font-medium\">Date</th>\n                <th className=\"px-8 py-5 font-medium\">Items</th>\n                <th className=\"px-8 py-5 font-medium\">Total</th>\n                <th className=\"px-8 py-5 font-medium\">Status</th>\n                <th className=\"px-8 py-5 text-right font-medium\">Actions</th>\n              </tr>\n            </thead>\n            <tbody>\n              {orders.length === 0 ? (\n                <tr>\n                  <td className=\"px-8 py-8 text-zinc-400\" colSpan={7}>\n                    No orders yet.\n                  </td>\n                </tr>\n              ) : (\n                orders.map((order) => (\n                  <tr className=\"border-b border-zinc-800/70 last:border-b-0\" key={order.id}>\n                    <td className=\"px-8 py-6 font-semibold text-zinc-100\">ORD-{order.id}</td>\n                    <td className=\"px-8 py-6 text-zinc-200\">Customer #{order.id}</td>\n                    <td className=\"px-8 py-6 text-zinc-300\">\n                      {new Date(order.createdAt).toLocaleDateString()}\n                    </td>\n                    <td className=\"px-8 py-6 text-zinc-100\">{order.orderItems.length}</td>\n                    <td className=\"px-8 py-6 font-semibold text-zinc-100\">${order.total.toFixed(2)}</td>\n                    <td className=\"px-8 py-6\">\n                      <span className={`rounded-xl px-4 py-1.5 ${statusClass(order.status)}`}>\n                        {capitalize(order.status)}\n                      </span>\n                    </td>\n                    <td className=\"px-8 py-6 text-right\">\n                      <button\n                        className=\"text-xl font-semibold text-[#4F7CFF] transition hover:text-[#6A8CFF]\"\n                        type=\"button\"\n                      >\n                        View Details\n                      </button>\n                    </td>\n                  </tr>\n                ))\n              )}\n            </tbody>\n          </table>\n        </div>\n      </section>\n    </div>\n  );\n}\n\nfunction StatChip({ label, value }: { label: string; value: string }) {\n  return (\n    <div className=\"rounded-2xl border border-zinc-800 bg-zinc-900 px-5 py-3\">\n      <p className=\"text-sm text-zinc-400\">{label}</p>\n      <p className=\"text-4xl font-bold text-zinc-100\">{value}</p>\n    </div>\n  );\n}\n\nfunction statusClass(status: string): string {\n  const normalized = status.toLowerCase();\n  if (normalized.includes(\"completed\")) return \"bg-emerald-950/60 text-emerald-300\";\n  if (normalized.includes(\"transit\")) return \"bg-violet-950/60 text-violet-300\";\n  if (normalized.includes(\"process\")) return \"bg-blue-950/60 text-blue-300\";\n  return \"bg-amber-950/60 text-amber-300\";\n}\n\nfunction capitalize(value: string): string {\n  if (value.length === 0) {\n    return value;\n  }\n  return value.charAt(0).toUpperCase() + value.slice(1).toLowerCase();\n}\n"],"names":[],"mappings":"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"}}]
}