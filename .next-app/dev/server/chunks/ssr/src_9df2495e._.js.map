{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Ribhav/OneDrive/Documents/Projects/Major%20project%20final/localli/src/components/dashboard/charts/GrowthTrendChart.tsx"],"sourcesContent":["\"use client\";\n\nimport { useMemo } from \"react\";\nimport {\n  Legend,\n  Line,\n  LineChart,\n  ResponsiveContainer,\n  Tooltip,\n  XAxis,\n  YAxis,\n} from \"recharts\";\n\ntype UnifiedCluster = {\n  clusterId: string;\n  currentDemandScore: number;\n  previousDemandScore: number;\n  growthRate: number;\n  isSurging: boolean;\n  competitionIndex: number;\n  opportunityScore: number;\n  latitude: number;\n  longitude: number;\n};\n\ninterface GrowthTrendChartProps {\n  days: number;\n  clusters: UnifiedCluster[];\n}\n\ntype GrowthPoint = {\n  period: \"Prev Window\" | \"Curr Window\";\n  demand: number;\n};\n\nfunction buildGrowthSeries(clusters: UnifiedCluster[]): GrowthPoint[] {\n  const sumPrev = clusters.reduce((sum, cluster) => sum + cluster.previousDemandScore, 0);\n  const sumCurr = clusters.reduce((sum, cluster) => sum + cluster.currentDemandScore, 0);\n\n  return [\n    { period: \"Prev Window\", demand: Number(sumPrev.toFixed(2)) },\n    { period: \"Curr Window\", demand: Number(sumCurr.toFixed(2)) },\n  ];\n}\n\nexport default function GrowthTrendChart({ days, clusters }: GrowthTrendChartProps) {\n  const data = useMemo(() => buildGrowthSeries(clusters), [clusters]);\n\n  if (clusters.length === 0) {\n    return (\n      <div className=\"rounded-xl border border-zinc-800 bg-zinc-900 p-6\">\n        <h3 className=\"text-base font-medium text-zinc-100\">Growth Trend</h3>\n        <div className=\"mt-4 flex h-56 items-center justify-center rounded-xl border border-dashed border-zinc-700\">\n          <span className=\"text-sm text-zinc-500\">No growth data available</span>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"rounded-xl border border-zinc-800 bg-zinc-900 p-6\">\n      <h3 className=\"text-base font-medium text-zinc-100\">Growth Trend ({days} days)</h3>\n      <div className=\"mt-4 h-56\">\n        <ResponsiveContainer height=\"100%\" width=\"100%\">\n          <LineChart data={data} margin={{ top: 8, right: 12, left: 0, bottom: 0 }}>\n            <XAxis\n              axisLine={{ stroke: \"#3F3F46\" }}\n              dataKey=\"period\"\n              tick={{ fill: \"#A1A1AA\", fontSize: 12 }}\n              tickLine={false}\n            />\n            <YAxis\n              axisLine={{ stroke: \"#3F3F46\" }}\n              tick={{ fill: \"#A1A1AA\", fontSize: 12 }}\n              tickLine={false}\n            />\n            <Tooltip\n              contentStyle={{\n                backgroundColor: \"#1C1C1E\",\n                border: \"1px solid #3F3F46\",\n                borderRadius: \"12px\",\n                color: \"#FFFFFF\",\n              }}\n              formatter={(value: number | string | undefined) => {\n                const numeric = typeof value === \"number\" ? value : Number(value ?? 0);\n                return [numeric.toFixed(2), \"Demand\"];\n              }}\n              labelStyle={{ color: \"#FFFFFF\" }}\n            />\n            <Legend wrapperStyle={{ color: \"#A1A1AA\", fontSize: \"12px\" }} />\n            <Line\n              dataKey=\"demand\"\n              dot={{ fill: \"#4F7CFF\", r: 5, strokeWidth: 0 }}\n              name=\"Total Demand\"\n              stroke=\"#4F7CFF\"\n              strokeWidth={3}\n              type=\"monotone\"\n            />\n          </LineChart>\n        </ResponsiveContainer>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAHA;;;;AAmCA,SAAS,kBAAkB,QAA0B;IACnD,MAAM,UAAU,SAAS,MAAM,CAAC,CAAC,KAAK,UAAY,MAAM,QAAQ,mBAAmB,EAAE;IACrF,MAAM,UAAU,SAAS,MAAM,CAAC,CAAC,KAAK,UAAY,MAAM,QAAQ,kBAAkB,EAAE;IAEpF,OAAO;QACL;YAAE,QAAQ;YAAe,QAAQ,OAAO,QAAQ,OAAO,CAAC;QAAI;QAC5D;YAAE,QAAQ;YAAe,QAAQ,OAAO,QAAQ,OAAO,CAAC;QAAI;KAC7D;AACH;AAEe,SAAS,iBAAiB,EAAE,IAAI,EAAE,QAAQ,EAAyB;IAChF,MAAM,OAAO,IAAA,gNAAO,EAAC,IAAM,kBAAkB,WAAW;QAAC;KAAS;IAElE,IAAI,SAAS,MAAM,KAAK,GAAG;QACzB,qBACE,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAG,WAAU;8BAAsC;;;;;;8BACpD,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBAAK,WAAU;kCAAwB;;;;;;;;;;;;;;;;;IAIhD;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;;oBAAsC;oBAAe;oBAAK;;;;;;;0BACxE,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC,0LAAmB;oBAAC,QAAO;oBAAO,OAAM;8BACvC,cAAA,8OAAC,kKAAS;wBAAC,MAAM;wBAAM,QAAQ;4BAAE,KAAK;4BAAG,OAAO;4BAAI,MAAM;4BAAG,QAAQ;wBAAE;;0CACrE,8OAAC,8JAAK;gCACJ,UAAU;oCAAE,QAAQ;gCAAU;gCAC9B,SAAQ;gCACR,MAAM;oCAAE,MAAM;oCAAW,UAAU;gCAAG;gCACtC,UAAU;;;;;;0CAEZ,8OAAC,8JAAK;gCACJ,UAAU;oCAAE,QAAQ;gCAAU;gCAC9B,MAAM;oCAAE,MAAM;oCAAW,UAAU;gCAAG;gCACtC,UAAU;;;;;;0CAEZ,8OAAC,kKAAO;gCACN,cAAc;oCACZ,iBAAiB;oCACjB,QAAQ;oCACR,cAAc;oCACd,OAAO;gCACT;gCACA,WAAW,CAAC;oCACV,MAAM,UAAU,OAAO,UAAU,WAAW,QAAQ,OAAO,SAAS;oCACpE,OAAO;wCAAC,QAAQ,OAAO,CAAC;wCAAI;qCAAS;gCACvC;gCACA,YAAY;oCAAE,OAAO;gCAAU;;;;;;0CAEjC,8OAAC,gKAAM;gCAAC,cAAc;oCAAE,OAAO;oCAAW,UAAU;gCAAO;;;;;;0CAC3D,8OAAC,4JAAI;gCACH,SAAQ;gCACR,KAAK;oCAAE,MAAM;oCAAW,GAAG;oCAAG,aAAa;gCAAE;gCAC7C,MAAK;gCACL,QAAO;gCACP,aAAa;gCACb,MAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOnB"}},
    {"offset": {"line": 206, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Ribhav/OneDrive/Documents/Projects/Major%20project%20final/localli/src/components/dashboard/charts/CompetitionOpportunityScatter.tsx"],"sourcesContent":["\"use client\";\n\nimport {\n  CartesianGrid,\n  Cell,\n  ReferenceLine,\n  ResponsiveContainer,\n  Scatter,\n  ScatterChart,\n  Tooltip,\n  XAxis,\n  YAxis,\n} from \"recharts\";\n\ntype UnifiedCluster = {\n  clusterId: string;\n  currentDemandScore: number;\n  previousDemandScore: number;\n  growthRate: number;\n  competitionIndex: number;\n  opportunityScore: number;\n  isSurging: boolean;\n  latitude: number;\n  longitude: number;\n};\n\ninterface Props {\n  clusters: UnifiedCluster[];\n  onPointClick?: (cluster: UnifiedCluster) => void;\n}\n\ntype ScatterPoint = {\n  clusterId: string;\n  competitionIndex: number;\n  opportunityScore: number;\n  isSurging: boolean;\n};\n\nfunction ScatterTooltip({\n  active,\n  payload,\n}: {\n  active?: boolean;\n  payload?: Array<{ payload: ScatterPoint }>;\n}) {\n  if (!active || !payload || payload.length === 0) {\n    return null;\n  }\n\n  const point = payload[0].payload;\n\n  return (\n    <div className=\"rounded-xl border border-zinc-700 bg-zinc-900 p-3 text-xs text-zinc-100 shadow-md\">\n      <p>\n        <span className=\"text-zinc-400\">Cluster:</span> {point.clusterId}\n      </p>\n      <p>\n        <span className=\"text-zinc-400\">Competition:</span> {point.competitionIndex.toFixed(2)}\n      </p>\n      <p>\n        <span className=\"text-zinc-400\">Opportunity:</span> {point.opportunityScore.toFixed(2)}\n      </p>\n      <p>\n        <span className=\"text-zinc-400\">Surging:</span> {point.isSurging ? \"Yes\" : \"No\"}\n      </p>\n    </div>\n  );\n}\n\nexport default function CompetitionOpportunityScatter({ clusters, onPointClick }: Props) {\n  if (clusters.length === 0) {\n    return (\n      <div className=\"rounded-xl border border-zinc-800 bg-zinc-900 p-6\">\n        <h3 className=\"text-base font-medium text-zinc-100\">Competition vs Opportunity</h3>\n        <div className=\"mt-4 flex h-56 items-center justify-center rounded-xl border border-dashed border-zinc-700\">\n          <span className=\"text-sm text-zinc-500\">No cluster positioning data</span>\n        </div>\n      </div>\n    );\n  }\n\n  const data: ScatterPoint[] = clusters.map((cluster) => ({\n    clusterId: cluster.clusterId,\n    competitionIndex: cluster.competitionIndex,\n    opportunityScore: cluster.opportunityScore,\n    isSurging: cluster.isSurging,\n  }));\n  const avgCompetitionIndex =\n    data.reduce((sum, point) => sum + point.competitionIndex, 0) / data.length;\n  const avgOpportunityScore =\n    data.reduce((sum, point) => sum + point.opportunityScore, 0) / data.length;\n\n  const xMin = Math.min(...data.map((point) => point.competitionIndex));\n  const xMax = Math.max(...data.map((point) => point.competitionIndex));\n  const yMin = Math.min(...data.map((point) => point.opportunityScore));\n  const yMax = Math.max(...data.map((point) => point.opportunityScore));\n\n  const xPad = Math.max(1, (xMax - xMin) * 0.1);\n  void yMin;\n  void yMax;\n\n  return (\n    <div className=\"rounded-xl border border-zinc-800 bg-zinc-900 p-6\">\n      <h3 className=\"text-base font-medium text-zinc-100\">Competition vs Opportunity</h3>\n      <div className=\"mt-4 h-56\">\n        <ResponsiveContainer height=\"100%\" width=\"100%\">\n          <ScatterChart margin={{ top: 8, right: 12, left: 0, bottom: 8 }}>\n            <CartesianGrid stroke=\"#3F3F46\" strokeDasharray=\"3 3\" />\n            <XAxis\n              axisLine={{ stroke: \"#3F3F46\" }}\n              dataKey=\"competitionIndex\"\n              name=\"Competition Index\"\n              tick={{ fill: \"#A1A1AA\", fontSize: 12 }}\n              tickLine={false}\n              type=\"number\"\n            />\n            <YAxis\n              axisLine={{ stroke: \"#3F3F46\" }}\n              dataKey=\"opportunityScore\"\n              name=\"Opportunity Score\"\n              tick={{ fill: \"#A1A1AA\", fontSize: 12 }}\n              tickLine={false}\n              type=\"number\"\n            />\n            <ReferenceLine\n              stroke=\"#52525B\"\n              strokeDasharray=\"4 4\"\n              x={avgCompetitionIndex}\n            />\n            <ReferenceLine\n              stroke=\"#52525B\"\n              strokeDasharray=\"4 4\"\n              y={avgOpportunityScore}\n            />\n            <Tooltip content={<ScatterTooltip />} cursor={{ stroke: \"#52525B\" }} />\n            <Scatter data={data} name=\"Clusters\">\n              {data.map((entry, index) => (\n                <Cell\n                  fill={entry.isSurging ? \"#4F7CFF\" : \"#A1A1AA\"}\n                  key={`${entry.clusterId}-${entry.competitionIndex}-${entry.opportunityScore}`}\n                  onClick={() => onPointClick?.(clusters[index])}\n                />\n              ))}\n            </Scatter>\n\n            <text\n              fill=\"#71717A\"\n              fontSize={11}\n              x={`${((avgCompetitionIndex - (xMin - xPad)) / (xMax - xMin + xPad * 2)) * 50 - 2}%`}\n              y={18}\n            >\n              Expansion Zone\n            </text>\n            <text\n              fill=\"#71717A\"\n              fontSize={11}\n              textAnchor=\"end\"\n              x={`${((avgCompetitionIndex - (xMin - xPad)) / (xMax - xMin + xPad * 2)) * 50 + 52}%`}\n              y={18}\n            >\n              Competitive Hot Zone\n            </text>\n            <text\n              fill=\"#71717A\"\n              fontSize={11}\n              x={`${((avgCompetitionIndex - (xMin - xPad)) / (xMax - xMin + xPad * 2)) * 50 - 2}%`}\n              y=\"92%\"\n            >\n              Dormant\n            </text>\n            <text\n              fill=\"#71717A\"\n              fontSize={11}\n              textAnchor=\"end\"\n              x={`${((avgCompetitionIndex - (xMin - xPad)) / (xMax - xMin + xPad * 2)) * 50 + 52}%`}\n              y=\"92%\"\n            >\n              Saturated\n            </text>\n          </ScatterChart>\n        </ResponsiveContainer>\n      </div>\n      <div className=\"mt-2 flex items-center justify-between text-xs text-zinc-500\">\n        <div className=\"flex items-center gap-3\">\n          <span className=\"inline-flex items-center gap-1.5\">\n            <span className=\"h-2.5 w-2.5 rounded-full bg-[#4F7CFF]\" />\n            Surging\n          </span>\n          <span className=\"inline-flex items-center gap-1.5\">\n            <span className=\"h-2.5 w-2.5 rounded-full bg-[#A1A1AA]\" />\n            Normal\n          </span>\n        </div>\n        <span>Opportunity Score vs Competition</span>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 606, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Ribhav/OneDrive/Documents/Projects/Major%20project%20final/localli/src/app/admin/page.tsx"],"sourcesContent":["\"use client\";\n\nimport dynamic from \"next/dynamic\";\nimport { useEffect, useMemo, useState } from \"react\";\nimport GrowthTrendChart from \"@/components/dashboard/charts/GrowthTrendChart\";\nimport CompetitionOpportunityScatter from \"@/components/dashboard/charts/CompetitionOpportunityScatter\";\n\ntype Cluster = {\n  clusterId: string;\n  currentDemandScore: number;\n  previousDemandScore: number;\n  growthRate: number;\n  isSurging: boolean;\n  competitionIndex: number;\n  opportunityScore: number;\n  latitude: number;\n  longitude: number;\n};\n\nexport default function AdminOverviewPage() {\n  const ClusterHeatmap = dynamic(\n    () => import(\"@/components/dashboard/map/ClusterHeatmap\"),\n    { ssr: false }\n  );\n  const [clusters, setClusters] = useState<Cluster[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    let active = true;\n\n    async function loadData() {\n      try {\n        setLoading(true);\n        setError(null);\n        const response = await fetch(\"/api/analytics/cluster-intelligence?days=14\");\n        if (!response.ok) {\n          throw new Error(\"Failed to load intelligence data\");\n        }\n        const data = (await response.json()) as { clusters?: Cluster[] };\n        if (!active) {\n          return;\n        }\n        setClusters(Array.isArray(data.clusters) ? data.clusters : []);\n      } catch (err) {\n        if (!active) {\n          return;\n        }\n        setError(err instanceof Error ? err.message : \"Unable to load admin overview\");\n      } finally {\n        if (active) {\n          setLoading(false);\n        }\n      }\n    }\n\n    void loadData();\n    return () => {\n      active = false;\n    };\n  }, []);\n\n  const metrics = useMemo(() => {\n    const totalClusters = clusters.length;\n    const surging = clusters.filter((cluster) => cluster.isSurging).length;\n    const highCompetition = clusters.filter((cluster) => cluster.competitionIndex >= 5).length;\n    const avgOpportunity =\n      totalClusters > 0\n        ? clusters.reduce((sum, cluster) => sum + cluster.opportunityScore, 0) / totalClusters\n        : 0;\n\n    return { totalClusters, surging, highCompetition, avgOpportunity };\n  }, [clusters]);\n\n  return (\n    <div className=\"space-y-8\">\n      <h1 className=\"text-5xl font-bold tracking-tight md:text-6xl\">Intelligence Overview</h1>\n\n      {loading ? (\n        <div className=\"rounded-2xl border border-zinc-800 bg-zinc-900/80 p-8 text-zinc-300\">\n          Loading overview...\n        </div>\n      ) : error ? (\n        <div className=\"rounded-2xl border border-red-900/40 bg-red-950/20 p-6 text-red-300\">\n          {error}\n        </div>\n      ) : (\n        <>\n          <section className=\"grid grid-cols-1 gap-6 md:grid-cols-2 xl:grid-cols-4\">\n            <MetricCard\n              label=\"Total Clusters\"\n              note=\"+12% vs last week\"\n              value={metrics.totalClusters.toString()}\n            />\n            <MetricCard label=\"Surging Zones\" note=\"Active now\" value={metrics.surging.toString()} />\n            <MetricCard\n              label=\"Avg Opportunity Score\"\n              note=\"Above target\"\n              value={metrics.avgOpportunity.toFixed(1)}\n            />\n            <MetricCard\n              label=\"High Competition Areas\"\n              note=\"Monitor closely\"\n              value={metrics.highCompetition.toString()}\n            />\n          </section>\n\n          <section className=\"rounded-3xl border border-zinc-800 bg-zinc-900/90 p-6\">\n            <h2 className=\"text-[2rem] font-semibold text-white\">Cluster Demand Heatmap</h2>\n            <div className=\"mt-5 overflow-hidden rounded-2xl border border-zinc-800\">\n              <ClusterHeatmap days={7} />\n            </div>\n          </section>\n\n          <section className=\"grid grid-cols-1 gap-6 xl:grid-cols-2\">\n            <GrowthTrendChart days={7} clusters={clusters} />\n            <CompetitionOpportunityScatter clusters={clusters} />\n          </section>\n        </>\n      )}\n    </div>\n  );\n}\n\nfunction MetricCard({\n  label,\n  value,\n  note,\n}: {\n  label: string;\n  value: string;\n  note: string;\n}) {\n  return (\n    <article className=\"rounded-3xl border border-zinc-800 bg-zinc-900/90 p-6\">\n      <p className=\"text-2xl text-zinc-400\">{label}</p>\n      <p className=\"mt-3 text-6xl font-bold text-zinc-100\">{value}</p>\n      <p className=\"mt-2 text-lg text-zinc-400\">{note}</p>\n    </article>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;;AALA;;;;;;AAmBe,SAAS;IACtB,MAAM,iBAAiB,IAAA,0KAAO;;;;;;QAE1B,KAAK;;IAET,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAY,EAAE;IACtD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAgB;IAElD,IAAA,kNAAS,EAAC;QACR,IAAI,SAAS;QAEb,eAAe;YACb,IAAI;gBACF,WAAW;gBACX,SAAS;gBACT,MAAM,WAAW,MAAM,MAAM;gBAC7B,IAAI,CAAC,SAAS,EAAE,EAAE;oBAChB,MAAM,IAAI,MAAM;gBAClB;gBACA,MAAM,OAAQ,MAAM,SAAS,IAAI;gBACjC,IAAI,CAAC,QAAQ;oBACX;gBACF;gBACA,YAAY,MAAM,OAAO,CAAC,KAAK,QAAQ,IAAI,KAAK,QAAQ,GAAG,EAAE;YAC/D,EAAE,OAAO,KAAK;gBACZ,IAAI,CAAC,QAAQ;oBACX;gBACF;gBACA,SAAS,eAAe,QAAQ,IAAI,OAAO,GAAG;YAChD,SAAU;gBACR,IAAI,QAAQ;oBACV,WAAW;gBACb;YACF;QACF;QAEA,KAAK;QACL,OAAO;YACL,SAAS;QACX;IACF,GAAG,EAAE;IAEL,MAAM,UAAU,IAAA,gNAAO,EAAC;QACtB,MAAM,gBAAgB,SAAS,MAAM;QACrC,MAAM,UAAU,SAAS,MAAM,CAAC,CAAC,UAAY,QAAQ,SAAS,EAAE,MAAM;QACtE,MAAM,kBAAkB,SAAS,MAAM,CAAC,CAAC,UAAY,QAAQ,gBAAgB,IAAI,GAAG,MAAM;QAC1F,MAAM,iBACJ,gBAAgB,IACZ,SAAS,MAAM,CAAC,CAAC,KAAK,UAAY,MAAM,QAAQ,gBAAgB,EAAE,KAAK,gBACvE;QAEN,OAAO;YAAE;YAAe;YAAS;YAAiB;QAAe;IACnE,GAAG;QAAC;KAAS;IAEb,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAAgD;;;;;;YAE7D,wBACC,8OAAC;gBAAI,WAAU;0BAAsE;;;;;uBAGnF,sBACF,8OAAC;gBAAI,WAAU;0BACZ;;;;;qCAGH;;kCACE,8OAAC;wBAAQ,WAAU;;0CACjB,8OAAC;gCACC,OAAM;gCACN,MAAK;gCACL,OAAO,QAAQ,aAAa,CAAC,QAAQ;;;;;;0CAEvC,8OAAC;gCAAW,OAAM;gCAAgB,MAAK;gCAAa,OAAO,QAAQ,OAAO,CAAC,QAAQ;;;;;;0CACnF,8OAAC;gCACC,OAAM;gCACN,MAAK;gCACL,OAAO,QAAQ,cAAc,CAAC,OAAO,CAAC;;;;;;0CAExC,8OAAC;gCACC,OAAM;gCACN,MAAK;gCACL,OAAO,QAAQ,eAAe,CAAC,QAAQ;;;;;;;;;;;;kCAI3C,8OAAC;wBAAQ,WAAU;;0CACjB,8OAAC;gCAAG,WAAU;0CAAuC;;;;;;0CACrD,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC;oCAAe,MAAM;;;;;;;;;;;;;;;;;kCAI1B,8OAAC;wBAAQ,WAAU;;0CACjB,8OAAC,wKAAgB;gCAAC,MAAM;gCAAG,UAAU;;;;;;0CACrC,8OAAC,qLAA6B;gCAAC,UAAU;;;;;;;;;;;;;;;;;;;;AAMrD;AAEA,SAAS,WAAW,EAClB,KAAK,EACL,KAAK,EACL,IAAI,EAKL;IACC,qBACE,8OAAC;QAAQ,WAAU;;0BACjB,8OAAC;gBAAE,WAAU;0BAA0B;;;;;;0BACvC,8OAAC;gBAAE,WAAU;0BAAyC;;;;;;0BACtD,8OAAC;gBAAE,WAAU;0BAA8B;;;;;;;;;;;;AAGjD"}}]
}