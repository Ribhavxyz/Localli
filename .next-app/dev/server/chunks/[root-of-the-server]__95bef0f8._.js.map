{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 70, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Ribhav/OneDrive/Documents/Projects/Major%20project%20final/localli/src/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from \"@prisma/client\";\r\n\r\nconst globalForPrisma = global as unknown as { prisma: PrismaClient };\r\n\r\nexport const prisma =\r\n  globalForPrisma.prisma ||\r\n  new PrismaClient({\r\n    log: [\"query\"],\r\n  });\r\n\r\nif (process.env.NODE_ENV !== \"production\")\r\n  globalForPrisma.prisma = prisma;\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM;AAEC,MAAM,SACX,gBAAgB,MAAM,IACtB,IAAI,sMAAY,CAAC;IACf,KAAK;QAAC;KAAQ;AAChB;AAEF,wCACE,gBAAgB,MAAM,GAAG"}},
    {"offset": {"line": 87, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Ribhav/OneDrive/Documents/Projects/Major%20project%20final/localli/src/app/api/auth/login/route.ts"],"sourcesContent":["import bcrypt from \"bcryptjs\";\nimport jwt from \"jsonwebtoken\";\nimport { NextRequest, NextResponse } from \"next/server\";\nimport { prisma } from \"@/lib/prisma\";\n\nexport async function POST(request: NextRequest) {\n  const jwtSecret = process.env.JWT_SECRET;\n  if (!jwtSecret) {\n    return NextResponse.json(\n      { message: \"Server configuration error\" },\n      { status: 500 }\n    );\n  }\n\n  try {\n    const body = await request.json();\n    const email = String(body?.email ?? \"\").trim().toLowerCase();\n    const password = String(body?.password ?? \"\");\n\n    if (!email || !password) {\n      return NextResponse.json(\n        { message: \"Email and password are required\" },\n        { status: 400 }\n      );\n    }\n\n    const user = await prisma.user.findUnique({ where: { email } });\n    if (!user) {\n      return NextResponse.json({ message: \"Invalid credentials\" }, { status: 401 });\n    }\n\n    const validPassword = await bcrypt.compare(password, user.password);\n    if (!validPassword) {\n      return NextResponse.json({ message: \"Invalid credentials\" }, { status: 401 });\n    }\n\n    const token = jwt.sign(\n      { userId: user.id, email: user.email, role: user.role },\n      jwtSecret,\n      { expiresIn: \"7d\" }\n    );\n\n    return NextResponse.json({ token }, { status: 200 });\n  } catch {\n    return NextResponse.json({ message: \"Invalid request body\" }, { status: 400 });\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;;;;;AAEO,eAAe,KAAK,OAAoB;IAC7C,MAAM,YAAY,QAAQ,GAAG,CAAC,UAAU;IACxC,IAAI,CAAC,WAAW;QACd,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,SAAS;QAA6B,GACxC;YAAE,QAAQ;QAAI;IAElB;IAEA,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,QAAQ,OAAO,MAAM,SAAS,IAAI,IAAI,GAAG,WAAW;QAC1D,MAAM,WAAW,OAAO,MAAM,YAAY;QAE1C,IAAI,CAAC,SAAS,CAAC,UAAU;YACvB,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,SAAS;YAAkC,GAC7C;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,OAAO,MAAM,gIAAM,CAAC,IAAI,CAAC,UAAU,CAAC;YAAE,OAAO;gBAAE;YAAM;QAAE;QAC7D,IAAI,CAAC,MAAM;YACT,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,SAAS;YAAsB,GAAG;gBAAE,QAAQ;YAAI;QAC7E;QAEA,MAAM,gBAAgB,MAAM,8IAAM,CAAC,OAAO,CAAC,UAAU,KAAK,QAAQ;QAClE,IAAI,CAAC,eAAe;YAClB,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,SAAS;YAAsB,GAAG;gBAAE,QAAQ;YAAI;QAC7E;QAEA,MAAM,QAAQ,kJAAG,CAAC,IAAI,CACpB;YAAE,QAAQ,KAAK,EAAE;YAAE,OAAO,KAAK,KAAK;YAAE,MAAM,KAAK,IAAI;QAAC,GACtD,WACA;YAAE,WAAW;QAAK;QAGpB,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE;QAAM,GAAG;YAAE,QAAQ;QAAI;IACpD,EAAE,OAAM;QACN,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAAuB,GAAG;YAAE,QAAQ;QAAI;IAC9E;AACF"}}]
}