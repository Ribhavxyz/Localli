{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Ribhav/OneDrive/Documents/Projects/Major%20project%20final/localli/src/app/admin/page.tsx"],"sourcesContent":["\"use client\";\n\nimport Link from \"next/link\";\nimport { useEffect, useMemo, useState } from \"react\";\n\ntype Cluster = {\n  clusterId: string;\n  currentDemandScore: number;\n  previousDemandScore: number;\n  growthRate: number;\n  isSurging: boolean;\n  competitionIndex: number;\n  opportunityScore: number;\n  latitude: number;\n  longitude: number;\n};\n\nexport default function AdminOverviewPage() {\n  const [clusters, setClusters] = useState<Cluster[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    let active = true;\n\n    async function loadData() {\n      try {\n        setLoading(true);\n        setError(null);\n        const response = await fetch(\"/api/analytics/cluster-intelligence?days=14\");\n        if (!response.ok) {\n          throw new Error(\"Failed to load intelligence data\");\n        }\n        const data = (await response.json()) as { clusters?: Cluster[] };\n        if (!active) {\n          return;\n        }\n        setClusters(Array.isArray(data.clusters) ? data.clusters : []);\n      } catch (err) {\n        if (!active) {\n          return;\n        }\n        setError(err instanceof Error ? err.message : \"Unable to load admin overview\");\n      } finally {\n        if (active) {\n          setLoading(false);\n        }\n      }\n    }\n\n    void loadData();\n    return () => {\n      active = false;\n    };\n  }, []);\n\n  const metrics = useMemo(() => {\n    const totalClusters = clusters.length;\n    const surging = clusters.filter((cluster) => cluster.isSurging).length;\n    const highCompetition = clusters.filter((cluster) => cluster.competitionIndex >= 5).length;\n    const avgOpportunity =\n      totalClusters > 0\n        ? clusters.reduce((sum, cluster) => sum + cluster.opportunityScore, 0) / totalClusters\n        : 0;\n\n    return { totalClusters, surging, highCompetition, avgOpportunity };\n  }, [clusters]);\n\n  return (\n    <div className=\"space-y-8\">\n      <h1 className=\"text-5xl font-bold tracking-tight md:text-6xl\">Admin Overview</h1>\n\n      {loading ? (\n        <div className=\"rounded-2xl border border-zinc-800 bg-zinc-900/80 p-8 text-zinc-300\">\n          Loading overview...\n        </div>\n      ) : error ? (\n        <div className=\"rounded-2xl border border-red-900/40 bg-red-950/20 p-6 text-red-300\">\n          {error}\n        </div>\n      ) : (\n        <>\n          <section className=\"grid grid-cols-1 gap-6 md:grid-cols-2 xl:grid-cols-4\">\n            <MetricCard label=\"Tracked Clusters\" value={metrics.totalClusters.toString()} />\n            <MetricCard label=\"Surging Clusters\" value={metrics.surging.toString()} />\n            <MetricCard label=\"High Competition\" value={metrics.highCompetition.toString()} />\n            <MetricCard label=\"Avg Opportunity\" value={metrics.avgOpportunity.toFixed(1)} />\n          </section>\n\n          <section className=\"grid grid-cols-1 gap-6 md:grid-cols-3\">\n            <AdminLinkCard href=\"/admin/clusters\" text=\"Inspect cluster level metrics and growth.\" title=\"Clusters\" />\n            <AdminLinkCard href=\"/admin/heatmap\" text=\"Visualize spatial demand density.\" title=\"Heatmap\" />\n            <AdminLinkCard href=\"/admin/logs\" text=\"Track recent intelligence events.\" title=\"Logs\" />\n          </section>\n        </>\n      )}\n    </div>\n  );\n}\n\nfunction MetricCard({ label, value }: { label: string; value: string }) {\n  return (\n    <article className=\"rounded-2xl border border-zinc-800 bg-zinc-900/90 p-6\">\n      <p className=\"text-2xl text-zinc-400\">{label}</p>\n      <p className=\"mt-4 text-6xl font-bold text-zinc-100\">{value}</p>\n    </article>\n  );\n}\n\nfunction AdminLinkCard({\n  title,\n  text,\n  href,\n}: {\n  title: string;\n  text: string;\n  href: string;\n}) {\n  return (\n    <Link\n      className=\"rounded-2xl border border-zinc-800 bg-zinc-900/90 p-6 transition hover:border-zinc-700 hover:bg-zinc-900\"\n      href={href}\n    >\n      <p className=\"text-3xl font-semibold text-zinc-100\">{title}</p>\n      <p className=\"mt-2 text-lg text-zinc-400\">{text}</p>\n    </Link>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}