{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Ribhav/OneDrive/Documents/Projects/Major%20project%20final/localli/src/app/admin/logs/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\n\ntype Cluster = {\n  clusterId: string;\n  currentDemandScore: number;\n  previousDemandScore: number;\n  growthRate: number;\n  isSurging: boolean;\n  competitionIndex: number;\n  opportunityScore: number;\n  latitude: number;\n  longitude: number;\n};\n\ntype LogEntry = {\n  id: string;\n  timestamp: string;\n  level: \"info\" | \"warning\" | \"success\";\n  message: string;\n};\n\nexport default function AdminLogsPage() {\n  const [clusters, setClusters] = useState<Cluster[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    let active = true;\n\n    async function loadData() {\n      try {\n        setLoading(true);\n        setError(null);\n        const response = await fetch(\"/api/analytics/cluster-intelligence?days=7\");\n        if (!response.ok) {\n          throw new Error(\"Failed to load logs data\");\n        }\n        const data = (await response.json()) as { clusters?: Cluster[] };\n        if (!active) {\n          return;\n        }\n        setClusters(Array.isArray(data.clusters) ? data.clusters : []);\n      } catch (err) {\n        if (!active) {\n          return;\n        }\n        setError(err instanceof Error ? err.message : \"Unable to load logs\");\n      } finally {\n        if (active) {\n          setLoading(false);\n        }\n      }\n    }\n\n    void loadData();\n    return () => {\n      active = false;\n    };\n  }, []);\n\n  const logs = useMemo<LogEntry[]>(() => {\n    const now = new Date();\n    const entries: LogEntry[] = [];\n\n    for (const cluster of clusters) {\n      if (cluster.isSurging) {\n        entries.push({\n          id: `surge-${cluster.clusterId}`,\n          timestamp: now.toISOString(),\n          level: \"success\",\n          message: `Cluster ${cluster.clusterId} marked as surging (${cluster.growthRate.toFixed(\n            1\n          )}% growth).`,\n        });\n      }\n\n      if (cluster.competitionIndex >= 6) {\n        entries.push({\n          id: `comp-${cluster.clusterId}`,\n          timestamp: now.toISOString(),\n          level: \"warning\",\n          message: `Cluster ${cluster.clusterId} high competition index ${cluster.competitionIndex.toFixed(\n            2\n          )}.`,\n        });\n      }\n\n      if (!cluster.isSurging && cluster.growthRate < 0) {\n        entries.push({\n          id: `drop-${cluster.clusterId}`,\n          timestamp: now.toISOString(),\n          level: \"info\",\n          message: `Cluster ${cluster.clusterId} demand declined by ${Math.abs(\n            cluster.growthRate\n          ).toFixed(1)}%.`,\n        });\n      }\n    }\n\n    return entries.slice(0, 25);\n  }, [clusters]);\n\n  return (\n    <div className=\"space-y-6\">\n      <h1 className=\"text-5xl font-bold tracking-tight md:text-6xl\">Logs</h1>\n\n      {loading ? (\n        <div className=\"rounded-2xl border border-zinc-800 bg-zinc-900/80 p-8 text-zinc-300\">\n          Loading logs...\n        </div>\n      ) : error ? (\n        <div className=\"rounded-2xl border border-red-900/40 bg-red-950/20 p-6 text-red-300\">\n          {error}\n        </div>\n      ) : (\n        <section className=\"space-y-3\">\n          {logs.length === 0 ? (\n            <div className=\"rounded-2xl border border-zinc-800 bg-zinc-900/90 p-6 text-zinc-400\">\n              No recent events.\n            </div>\n          ) : (\n            logs.map((log) => (\n              <article\n                className=\"rounded-xl border border-zinc-800 bg-zinc-900/90 p-4\"\n                key={log.id}\n              >\n                <div className=\"flex flex-wrap items-center justify-between gap-2\">\n                  <span\n                    className={`rounded-md px-2 py-1 text-xs uppercase tracking-wide ${\n                      log.level === \"success\"\n                        ? \"bg-emerald-950/60 text-emerald-300\"\n                        : log.level === \"warning\"\n                          ? \"bg-amber-950/60 text-amber-300\"\n                          : \"bg-blue-950/60 text-blue-300\"\n                    }`}\n                  >\n                    {log.level}\n                  </span>\n                  <span className=\"text-xs text-zinc-500\">\n                    {new Date(log.timestamp).toLocaleString()}\n                  </span>\n                </div>\n                <p className=\"mt-2 text-sm text-zinc-200\">{log.message}</p>\n              </article>\n            ))\n          )}\n        </section>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}