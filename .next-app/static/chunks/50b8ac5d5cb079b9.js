(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,91372,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(18566),l=e.i(43037),a=e.i(55706),i=e.i(29228),o=e.i(31195),n=e.i(34239),d=e.i(85183),c=e.i(93230);function x(){let e=(0,s.useRouter)(),[x,b]=(0,r.useState)(null),[m,h]=(0,r.useState)([]),[g,p]=(0,r.useState)(!0),[f,j]=(0,r.useState)(null);(0,r.useEffect)(()=>{let t=!0;return async function(){try{p(!0),j(null);let[r,s,a]=await Promise.all([(0,l.authFetch)("/api/vendor/store"),(0,l.authFetch)("/api/vendor/analytics"),(0,l.authFetch)("/api/vendor/orders")]);if(404===r.status)return void e.replace("/vendor/store");if(!r.ok||!s.ok||!a.ok)throw Error("Failed to load vendor dashboard");let i=await s.json(),o=await a.json();if(!t)return;b(i),h(Array.isArray(o)?o:[])}catch(e){if(!t)return;j(e instanceof Error?e.message:"Unable to load dashboard")}finally{t&&p(!1)}}(),()=>{t=!1}},[e]);let v=(0,r.useMemo)(()=>(function(e){let t=new Date(new Date);t.setHours(0,0,0,0),t.setDate(t.getDate()-6);let r=new Map;for(let e=0;e<7;e+=1){let s=new Date(t);s.setDate(t.getDate()+e);let l=s.toISOString().slice(0,10);r.set(l,0)}for(let t of e){let e=new Date(t.createdAt);if(Number.isNaN(e.getTime()))continue;e.setHours(0,0,0,0);let s=e.toISOString().slice(0,10);r.has(s)&&r.set(s,(r.get(s)??0)+t.total)}return Array.from(r.entries()).map(([e,t])=>({label:new Date(e).toLocaleDateString(void 0,{weekday:"short"}),revenue:Number(t.toFixed(2))}))})(m),[m]);if(g)return(0,t.jsx)("div",{className:"rounded-2xl border border-zinc-800 bg-zinc-900/80 p-10 text-center text-zinc-300",children:"Loading dashboard..."});if(f||!x)return(0,t.jsx)("div",{className:"rounded-2xl border border-red-900/40 bg-red-950/20 p-6 text-red-300",children:f??"Failed to load dashboard"});let F=x.totalPurchases>0?x.totalRevenue/x.totalPurchases:0;return(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsx)("h1",{className:"text-5xl font-bold tracking-tight md:text-6xl",children:"Vendor Dashboard"}),(0,t.jsxs)("section",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 xl:grid-cols-4",children:[(0,t.jsx)(u,{label:"Total Products",value:x.totalProducts.toString(),tone:"blue",note:"+4 this week"}),(0,t.jsx)(u,{label:"Total Orders",value:x.totalPurchases.toString(),tone:"green",note:"+12% vs last week"}),(0,t.jsx)(u,{label:"Revenue",value:`$${x.totalRevenue.toLocaleString(void 0,{maximumFractionDigits:0})}`,tone:"amber",note:"+18% vs last week"}),(0,t.jsx)(u,{label:"Avg Order Value",value:`$${F.toFixed(2)}`,tone:"purple",note:"+5% increase"})]}),(0,t.jsxs)("section",{className:"grid grid-cols-1 gap-6 xl:grid-cols-[2fr_1fr]",children:[(0,t.jsxs)("div",{className:"rounded-2xl border border-zinc-800 bg-zinc-900/90 p-6",children:[(0,t.jsx)("h2",{className:"text-4xl font-semibold",children:"Weekly Revenue"}),(0,t.jsx)("div",{className:"mt-5 h-[380px]",children:(0,t.jsx)(o.ResponsiveContainer,{height:"100%",width:"100%",children:(0,t.jsxs)(i.LineChart,{data:v,margin:{top:10,right:16,left:0,bottom:10},children:[(0,t.jsx)(d.XAxis,{axisLine:{stroke:"#3F3F46"},dataKey:"label",tick:{fill:"#A1A1AA",fontSize:12},tickLine:!1}),(0,t.jsx)(c.YAxis,{axisLine:{stroke:"#3F3F46"},tick:{fill:"#A1A1AA",fontSize:12},tickLine:!1,width:48}),(0,t.jsx)(n.Tooltip,{contentStyle:{backgroundColor:"#1C1C1E",border:"1px solid #3F3F46",borderRadius:"12px",color:"#FFFFFF"},formatter:e=>{let t="number"==typeof e?e:Number(e??0);return[`$${t.toFixed(2)}`,"Revenue"]},labelStyle:{color:"#FFFFFF"}}),(0,t.jsx)(a.Line,{dataKey:"revenue",dot:{fill:"#4F7CFF",r:5,strokeWidth:0},stroke:"#4F7CFF",strokeWidth:4,type:"monotone"})]})})})]}),(0,t.jsxs)("div",{className:"rounded-2xl border border-zinc-800 bg-zinc-900/90 p-6",children:[(0,t.jsx)("h2",{className:"text-4xl font-semibold",children:"Recent Orders"}),(0,t.jsx)("div",{className:"mt-5 space-y-4",children:0===m.length?(0,t.jsx)("p",{className:"text-zinc-400",children:"No recent orders."}):m.slice(0,5).map(e=>{let r;return(0,t.jsxs)("div",{className:"border-b border-zinc-800 pb-4 last:border-b-0",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,t.jsxs)("p",{className:"text-3xl font-semibold",children:["ORD-",e.id]}),(0,t.jsx)("span",{className:`rounded-xl px-3 py-1 text-lg ${(r=e.status.toLowerCase()).includes("completed")?"bg-emerald-950/60 text-emerald-300":r.includes("process")||r.includes("placed")?"bg-amber-950/60 text-amber-300":r.includes("transit")?"bg-violet-950/60 text-violet-300":"bg-blue-950/60 text-blue-300"}`,children:e.status.toLowerCase()})]}),(0,t.jsx)("p",{className:"mt-1 text-xl text-zinc-400",children:new Date(e.createdAt).toLocaleDateString()}),(0,t.jsxs)("p",{className:"mt-2 text-3xl font-semibold",children:["$",e.total.toFixed(2)]})]},e.id)})})]})]})]})}function u({label:e,value:r,note:s,tone:l}){return(0,t.jsxs)("article",{className:"rounded-2xl border border-zinc-800 bg-zinc-900/90 p-6",children:[(0,t.jsx)("p",{className:"text-2xl text-zinc-400",children:e}),(0,t.jsx)("p",{className:`mt-4 text-6xl font-bold ${{blue:"text-blue-400",green:"text-emerald-400",amber:"text-amber-400",purple:"text-violet-400"}[l]}`,children:r}),(0,t.jsx)("p",{className:"mt-2 text-lg text-[#30D158]",children:s})]})}e.s(["default",()=>x])}]);