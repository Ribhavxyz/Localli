(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,30257,e=>{"use strict";var t=e.i(43476),i=e.i(71645),n=e.i(74105),r=e.i(59559),a=e.i(55706),l=e.i(29228),s=e.i(31195),o=e.i(34239),c=e.i(85183),d=e.i(93230);function u({days:e,clusters:n}){let u=(0,i.useMemo)(()=>{let e,t;return e=n.reduce((e,t)=>e+t.previousDemandScore,0),t=n.reduce((e,t)=>e+t.currentDemandScore,0),[{period:"Prev Window",demand:Number(e.toFixed(2))},{period:"Curr Window",demand:Number(t.toFixed(2))}]},[n]);return 0===n.length?(0,t.jsxs)("div",{className:"rounded-xl border border-zinc-800 bg-zinc-900 p-6",children:[(0,t.jsx)("h3",{className:"text-base font-medium text-zinc-100",children:"Growth Trend"}),(0,t.jsx)("div",{className:"mt-4 flex h-56 items-center justify-center rounded-xl border border-dashed border-zinc-700",children:(0,t.jsx)("span",{className:"text-sm text-zinc-500",children:"No growth data available"})})]}):(0,t.jsxs)("div",{className:"rounded-xl border border-zinc-800 bg-zinc-900 p-6",children:[(0,t.jsxs)("h3",{className:"text-base font-medium text-zinc-100",children:["Growth Trend (",e," days)"]}),(0,t.jsx)("div",{className:"mt-4 h-56",children:(0,t.jsx)(s.ResponsiveContainer,{height:"100%",width:"100%",children:(0,t.jsxs)(l.LineChart,{data:u,margin:{top:8,right:12,left:0,bottom:0},children:[(0,t.jsx)(c.XAxis,{axisLine:{stroke:"#3F3F46"},dataKey:"period",tick:{fill:"#A1A1AA",fontSize:12},tickLine:!1}),(0,t.jsx)(d.YAxis,{axisLine:{stroke:"#3F3F46"},tick:{fill:"#A1A1AA",fontSize:12},tickLine:!1}),(0,t.jsx)(o.Tooltip,{contentStyle:{backgroundColor:"#1C1C1E",border:"1px solid #3F3F46",borderRadius:"12px",color:"#FFFFFF"},formatter:e=>[("number"==typeof e?e:Number(e??0)).toFixed(2),"Demand"],labelStyle:{color:"#FFFFFF"}}),(0,t.jsx)(r.Legend,{wrapperStyle:{color:"#A1A1AA",fontSize:"12px"}}),(0,t.jsx)(a.Line,{dataKey:"demand",dot:{fill:"#4F7CFF",r:5,strokeWidth:0},name:"Total Demand",stroke:"#4F7CFF",strokeWidth:3,type:"monotone"})]})})})]})}var x=e.i(72526),m=e.i(22787),p=e.i(7670),h=e.i(97865),y=e.i(494),f=e.i(94395),v=e.i(44171),g=e.i(46710),b=e.i(31725),j=e.i(27241),A=e.i(61764),N=e.i(75337),S=e.i(89763),z=e.i(43404),I=e.i(51883),w=e.i(29601),E=e.i(18457),F=e.i(22075);class O{constructor(e){var{x:t,y:i}=e;this.xAxisScale=t,this.yAxisScale=i}map(e,t){var i,n,{position:r}=t;return{x:null!=(i=this.xAxisScale.map(e.x,{position:r}))?i:0,y:null!=(n=this.yAxisScale.map(e.y,{position:r}))?n:0}}mapWithFallback(e,t){var i,n,r,a,{position:l,fallback:s}=t;return r="rangeMin"===s?this.yAxisScale.rangeMin():"rangeMax"===s?this.yAxisScale.rangeMax():0,a="rangeMin"===s?this.xAxisScale.rangeMin():"rangeMax"===s?this.xAxisScale.rangeMax():0,{x:null!=(i=this.xAxisScale.map(e.x,{position:l}))?i:a,y:null!=(n=this.yAxisScale.map(e.y,{position:l}))?n:r}}isInRange(e){var{x:t,y:i}=e,n=null==t||this.xAxisScale.isInRange(t),r=null==i||this.yAxisScale.isInRange(i);return n&&r}}function C(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function P(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?C(Object(i),!0).forEach(function(t){var n,r,a;n=e,r=t,a=i[t],(r=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(r))in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):C(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function k(){return(k=Object.assign.bind()).apply(null,arguments)}function D(e){var t=(0,j.useAppDispatch)();return(0,i.useEffect)(()=>(t((0,b.addLine)(e)),()=>{t((0,b.removeLine)(e))})),null}function T(e){var{xAxisId:t,yAxisId:n,shape:r,className:a,ifOverflow:l}=e,s=(0,N.useIsPanorama)(),o=(0,S.useClipPathId)(),c=(0,j.useAppSelector)(e=>(0,A.selectXAxisSettings)(e,t)),d=(0,j.useAppSelector)(e=>(0,A.selectYAxisSettings)(e,n)),u=(0,j.useAppSelector)(e=>(0,A.selectAxisScale)(e,"xAxis",t,s)),x=(0,j.useAppSelector)(e=>(0,A.selectAxisScale)(e,"yAxis",n,s)),m=(0,g.useViewBox)();if(!o||!m||null==c||null==d||null==u||null==x)return null;var b=((e,t,i,n,r,a,l)=>{var s,o,{x:c,y:d,segment:u,ifOverflow:x}=l,m=(0,f.isNumOrStr)(c);return(0,f.isNumOrStr)(d)?((e,t,i,n,r,a)=>{var{x:l,width:s}=a,o=r.map(e,{position:i});if(!(0,F.isWellBehavedNumber)(o)||"discard"===t&&!r.isInRange(o))return null;var c=[{x:l+s,y:o},{x:l,y:o}];return"left"===n?c.reverse():c})(d,x,n,a,t,i):m?((e,t,i,n,r,a)=>{var{y:l,height:s}=a,o=r.map(e,{position:i});if(!(0,F.isWellBehavedNumber)(o)||"discard"===t&&!r.isInRange(o))return null;var c=[{x:o,y:l+s},{x:o,y:l}];return"top"===n?c.reverse():c})(c,x,n,r,e,i):null!=u&&2===u.length?(o=[(s=new O({x:e,y:t})).mapWithFallback(u[0],{position:n,fallback:"rangeMin"}),s.mapWithFallback(u[1],{position:n,fallback:"rangeMax"})],"discard"===x&&o.some(e=>!s.isInRange(e))?null:o):null})(u,x,m,e.position,c.orientation,d.orientation,e);if(!b)return null;var I=b[0],E=b[1];if(null==I||null==E)return null;var{x:C,y:D}=I,{x:T,y:L}=E,M=P(P({clipPath:"hidden"===l?"url(#".concat(o,")"):void 0},(0,z.svgPropertiesAndEvents)(e)),{},{x1:C,y1:D,x2:T,y2:L}),K=(0,v.rectWithCoords)({x1:C,y1:D,x2:T,y2:L});return i.createElement(w.ZIndexLayer,{zIndex:e.zIndex},i.createElement(h.Layer,{className:(0,p.clsx)("recharts-reference-line",a)},((e,t)=>{var n;if(i.isValidElement(e))n=i.cloneElement(e,t);else if("function"==typeof e)n=e(t);else{if(!(0,F.isWellBehavedNumber)(t.x1)||!(0,F.isWellBehavedNumber)(t.y1)||!(0,F.isWellBehavedNumber)(t.x2)||!(0,F.isWellBehavedNumber)(t.y2))return null;n=i.createElement("line",k({},t,{className:"recharts-reference-line-line"}))}return n})(r,M),i.createElement(y.CartesianLabelContextProvider,k({},K,{lowerWidth:K.width,upperWidth:K.width}),i.createElement(y.CartesianLabelFromLabelProp,{label:e.label}),e.children)))}var L={ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",label:!1,stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle",zIndex:E.DefaultZIndexes.line};function M(e){var t=(0,I.resolveDefaultProps)(e,L);return i.createElement(i.Fragment,null,i.createElement(D,{yAxisId:t.yAxisId,xAxisId:t.xAxisId,ifOverflow:t.ifOverflow,x:t.x,y:t.y,segment:t.segment}),i.createElement(T,t))}M.displayName="ReferenceLine";var K=e.i(69212),W=e.i(81977),B=e.i(72733),R=e.i(79812),$=e.i(73393),G=e.i(13659),Z=e.i(18519),V=["option","isActive"];function H(){return(H=Object.assign.bind()).apply(null,arguments)}function _(e){var{option:t,isActive:n}=e,r=function(e,t){if(null==e)return{};var i,n,r=function(e,t){if(null==e)return{};var i={};for(var n in e)if(({}).hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;i[n]=e[n]}return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)i=a[n],-1===t.indexOf(i)&&({}).propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}(e,V);return"string"==typeof t?i.createElement(Z.Shape,H({option:i.createElement(G.Symbols,H({type:t},r)),isActive:n,shapeType:"symbols"},r)):i.createElement(Z.Shape,H({option:t,isActive:n,shapeType:"symbols"},r))}var U=e.i(94585),Y=e.i(844),J=e.i(45542),X=e.i(59798),q=e.i(61849),Q=e.i(92860),ee=(0,q.createSelector)([A.selectUnfilteredCartesianItems,(e,t,i,n,r)=>r],(e,t)=>e.filter(e=>"scatter"===e.type).find(e=>e.id===t)),et=(0,q.createSelector)([(e,t,i,n,r,a,l)=>(0,Q.selectChartDataWithIndexesIfNotInPanoramaPosition4)(e,void 0,void 0,l),(e,t,i,n,r,a,l)=>(0,A.selectAxisWithScale)(e,"xAxis",t,l),(e,t,i,n,r,a,l)=>(0,A.selectTicksOfGraphicalItem)(e,"xAxis",t,l),(e,t,i,n,r,a,l)=>(0,A.selectAxisWithScale)(e,"yAxis",i,l),(e,t,i,n,r,a,l)=>(0,A.selectTicksOfGraphicalItem)(e,"yAxis",i,l),(e,t,i,n)=>(0,A.selectZAxisWithScale)(e,"zAxis",n,!1),ee,(e,t,i,n,r,a)=>a],(e,t,i,n,r,a,l,s)=>{var o,{chartData:c,dataStartIndex:d,dataEndIndex:u}=e;if(null!=l&&null!=(o=(null==l?void 0:l.data)!=null&&l.data.length>0?l.data:null==c?void 0:c.slice(d,u+1))&&null!=t&&null!=n&&null!=i&&null!=r&&(null==i?void 0:i.length)!==0&&(null==r?void 0:r.length)!==0)return function(e){var{displayedData:t,xAxis:i,yAxis:n,zAxis:r,scatterSettings:a,xAxisTicks:l,yAxisTicks:s,cells:o}=e,c=(0,f.isNullish)(i.dataKey)?a.dataKey:i.dataKey,d=(0,f.isNullish)(n.dataKey)?a.dataKey:n.dataKey,u=r&&r.dataKey,x=r?r.range:A.implicitZAxis.range,m=x&&x[0],p=i.scale.bandwidth?i.scale.bandwidth():0,h=n.scale.bandwidth?n.scale.bandwidth():0;return t.map((e,t)=>{var x=(0,R.getValueByDataKey)(e,c),y=(0,R.getValueByDataKey)(e,d),v=!(0,f.isNullish)(u)&&(0,R.getValueByDataKey)(e,u)||"-",g=[{name:(0,f.isNullish)(i.dataKey)?a.name:i.name||String(i.dataKey),unit:i.unit||"",value:x,payload:e,dataKey:c,type:a.tooltipType},{name:(0,f.isNullish)(n.dataKey)?a.name:n.name||String(n.dataKey),unit:n.unit||"",value:y,payload:e,dataKey:d,type:a.tooltipType}];"-"!==v&&null!=r&&g.push({name:r.name||r.dataKey,unit:r.unit||"",value:v,payload:e,dataKey:u,type:a.tooltipType});var b=(0,R.getCateCoordinateOfLine)({axis:i,ticks:l,bandSize:p,entry:e,index:t,dataKey:c}),j=(0,R.getCateCoordinateOfLine)({axis:n,ticks:s,bandSize:h,entry:e,index:t,dataKey:d}),A="-"!==v&&null!=r?r.scale.map(v):m,N=null==A?0:Math.sqrt(Math.max(A,0)/Math.PI);return ef(ef({},e),{},{cx:b,cy:j,x:null==b?void 0:b-N,y:null==j?void 0:j-N,width:2*N,height:2*N,size:A,node:{x,y,z:v},tooltipPayload:g,tooltipPosition:{x:b,y:j},payload:e},o&&o[t]&&o[t].props)})}({displayedData:o,xAxis:t,yAxis:n,zAxis:a,scatterSettings:l,xAxisTicks:i,yAxisTicks:r,cells:s})}),ei=e.i(76735),en=e.i(95146),er=e.i(94810),ea=e.i(40657),el=e.i(15549),es=e.i(91187),eo=e.i(57999),ec=e.i(66576),ed=e.i(20135),eu=["id"],ex=["onMouseEnter","onClick","onMouseLeave"],em=["animationBegin","animationDuration","animationEasing","hide","isAnimationActive","legendType","lineJointType","lineType","shape","xAxisId","yAxisId","zAxisId"];function ep(e,t){if(null==e)return{};var i,n,r=function(e,t){if(null==e)return{};var i={};for(var n in e)if(({}).hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;i[n]=e[n]}return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)i=a[n],-1===t.indexOf(i)&&({}).propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}function eh(){return(eh=Object.assign.bind()).apply(null,arguments)}function ey(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function ef(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ey(Object(i),!0).forEach(function(t){var n,r,a;n=e,r=t,a=i[t],(r=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(r))in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ey(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var ev=i.memo(e=>{var{dataKey:t,points:n,stroke:r,strokeWidth:a,fill:l,name:s,hide:o,tooltipType:c,id:d}=e,u={dataDefinedOnItem:null==n?void 0:n.map(e=>e.tooltipPayload),getPosition:e=>{var t;return null==n||null==(t=n[Number(e)])?void 0:t.tooltipPosition},settings:{stroke:r,strokeWidth:a,fill:l,nameKey:void 0,dataKey:t,name:(0,R.getTooltipNameProp)(s,t),hide:o,type:c,color:l,unit:"",graphicalItemId:d}};return i.createElement(Y.SetTooltipEntrySettings,{tooltipEntrySettings:u})});function eg(e){var t,n,{points:r,props:a}=e,{line:l,lineType:s,lineJointType:o}=a;if(!l)return null;var c=(0,eo.svgPropertiesNoEvents)(a),d=(0,eo.svgPropertiesNoEventsFromUnknown)(l);if("joint"===s)t=r.map(e=>{var t,i;return{x:null!=(t=e.cx)?t:null,y:null!=(i=e.cy)?i:null}});else if("fitting"===s){var{xmin:u,xmax:x,a:m,b:p}=(0,f.getLinearRegression)(r);t=[{x:u,y:m*u+p},{x:x,y:m*x+p}]}var y=ef(ef(ef({},c),{},{fill:"none",stroke:c&&c.fill},d),{},{points:t});return n=i.isValidElement(l)?i.cloneElement(l,y):"function"==typeof l?l(y):i.createElement(B.Curve,eh({},y,{type:o})),i.createElement(h.Layer,{className:"recharts-scatter-line",key:"recharts-scatter-line"},n)}function eb(e){var{showLabels:t,points:n,children:r}=e,a=(0,g.useViewBox)(),l=(0,i.useMemo)(()=>null==n?void 0:n.map(e=>{var t,i,n={x:null!=(t=e.x)?t:0,y:null!=(i=e.y)?i:0,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width};return ef(ef({},n),{},{value:void 0,payload:e.payload,viewBox:n,parentViewBox:a,fill:void 0})}),[a,n]);return i.createElement(K.CartesianLabelListContextProvider,{value:t?l:void 0},r)}function ej(e){var{points:t,allOtherScatterProps:n}=e,{shape:r,activeShape:a,dataKey:l}=n,{id:s}=n,o=ep(n,eu),c=(0,j.useAppSelector)(ei.selectActiveTooltipIndex),{onMouseEnter:d,onClick:u,onMouseLeave:x}=n,m=ep(n,ex),p=(0,U.useMouseEnterItemDispatch)(d,l,s),y=(0,U.useMouseLeaveItemDispatch)(x),f=(0,U.useMouseClickItemDispatch)(u,l,s);if(!(0,$.isNonEmptyArray)(t))return null;var v=(0,eo.svgPropertiesNoEvents)(o);return i.createElement(i.Fragment,null,i.createElement(eg,{points:t,props:o}),t.map((e,t)=>{var n=null!=a&&!1!==a,l=n&&c===String(t),o=n&&l?a:r,d=ef(ef(ef({},v),e),{},{index:t,[er.DATA_ITEM_GRAPHICAL_ITEM_ID_ATTRIBUTE_NAME]:String(s)});return i.createElement(w.ZIndexLayer,{key:"symbol-".concat(null==e?void 0:e.cx,"-").concat(null==e?void 0:e.cy,"-").concat(null==e?void 0:e.size,"-").concat(t),zIndex:l?E.DefaultZIndexes.activeDot:void 0},i.createElement(h.Layer,eh({className:"recharts-scatter-symbol"},(0,$.adaptEventsOfChild)(m,e,t),{onMouseEnter:p(e,t),onMouseLeave:y(e,t),onClick:f(e,t)}),i.createElement(_,eh({option:o,isActive:l},d))))}))}function eA(e){var{previousPointsRef:t,props:n}=e,{points:r,isAnimationActive:a,animationBegin:l,animationDuration:s,animationEasing:o}=n,c=t.current,d=(0,ea.useAnimationId)(n,"recharts-scatter-"),[u,x]=(0,i.useState)(!1),m=(0,i.useCallback)(()=>{x(!1)},[]),p=(0,i.useCallback)(()=>{x(!0)},[]),y=!u;return i.createElement(eb,{showLabels:y,points:r},n.children,i.createElement(ec.JavascriptAnimate,{animationId:d,begin:l,duration:s,isActive:a,easing:o,onAnimationEnd:m,onAnimationStart:p,key:d},e=>{var a=1===e?r:null==r?void 0:r.map((t,i)=>{var n=c&&c[i];return n?ef(ef({},t),{},{cx:null==t.cx?void 0:(0,f.interpolate)(n.cx,t.cx,e),cy:null==t.cy?void 0:(0,f.interpolate)(n.cy,t.cy,e),size:(0,f.interpolate)(n.size,t.size,e)}):ef(ef({},t),{},{size:(0,f.interpolate)(0,t.size,e)})});return e>0&&(t.current=a),i.createElement(h.Layer,null,i.createElement(ej,{points:a,allOtherScatterProps:n,showLabels:y}))}),i.createElement(K.LabelListFromLabelProp,{label:n.label}))}var eN=(e,t,i)=>({x:e.cx,y:e.cy,value:"x"===i?Number(e.node.x):Number(e.node.y),errorVal:(0,R.getValueByDataKey)(e,t)});function eS(e){var{hide:t,points:n,className:r,needClip:a,xAxisId:l,yAxisId:s,id:o}=e,c=(0,i.useRef)(null);if(t)return null;var d=(0,p.clsx)("recharts-scatter",r);return i.createElement(w.ZIndexLayer,{zIndex:e.zIndex},i.createElement(h.Layer,{className:d,clipPath:a?"url(#clipPath-".concat(o,")"):void 0,id:o},a&&i.createElement("defs",null,i.createElement(X.GraphicalItemClipPath,{clipPathId:o,xAxisId:l,yAxisId:s})),i.createElement(J.SetErrorBarContext,{xAxisId:l,yAxisId:s,data:n,dataPointFormatter:eN,errorBarOffset:0},i.createElement(h.Layer,{key:"recharts-scatter-symbols"},i.createElement(eA,{props:e,previousPointsRef:c})))))}var ez={xAxisId:0,yAxisId:0,zAxisId:0,label:!1,line:!1,legendType:"circle",lineType:"joint",lineJointType:"linear",shape:"circle",hide:!1,isAnimationActive:"auto",animationBegin:0,animationDuration:400,animationEasing:"linear",zIndex:E.DefaultZIndexes.scatter};function eI(e){var t=(0,I.resolveDefaultProps)(e,ez),{animationBegin:n,animationDuration:r,animationEasing:a,hide:l,isAnimationActive:s,legendType:o,lineJointType:c,lineType:d,shape:u,xAxisId:x,yAxisId:p,zAxisId:h}=t,y=ep(t,em),{needClip:f}=(0,X.useNeedsClip)(x,p),v=(0,i.useMemo)(()=>(0,W.findAllByType)(e.children,m.Cell),[e.children]),g=(0,N.useIsPanorama)(),b=(0,j.useAppSelector)(t=>et(t,x,p,h,e.id,v,g));return null==f||null==b?null:i.createElement(i.Fragment,null,i.createElement(ev,{dataKey:e.dataKey,points:b,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType,id:e.id}),i.createElement(eS,eh({},y,{xAxisId:x,yAxisId:p,zAxisId:h,lineType:d,lineJointType:c,legendType:o,shape:u,hide:l,isAnimationActive:s,animationBegin:n,animationDuration:r,animationEasing:a,points:b,needClip:f})))}var ew=i.memo(function(e){var t=(0,I.resolveDefaultProps)(e,ez),n=(0,N.useIsPanorama)();return i.createElement(el.RegisterGraphicalItemId,{id:t.id,type:"scatter"},e=>i.createElement(i.Fragment,null,i.createElement(en.SetLegendPayload,{legendPayload:(e=>{var{dataKey:t,name:i,fill:n,legendType:r,hide:a}=e;return[{inactive:a,dataKey:t,type:r,color:n,value:(0,R.getTooltipNameProp)(i,t),payload:e}]})(t)}),i.createElement(es.SetCartesianGraphicalItem,{type:"scatter",id:e,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:t.zAxisId,dataKey:t.dataKey,hide:t.hide,name:t.name,tooltipType:t.tooltipType,isPanorama:n}),i.createElement(eI,eh({},t,{id:e}))))},ed.propsAreEqual);ew.displayName="Scatter";var eE=e.i(25949),eF=e.i(33369),eO=["item"],eC=(0,i.forwardRef)((e,t)=>i.createElement(eF.CartesianChart,{chartName:"ScatterChart",defaultTooltipEventType:"item",validateTooltipEventTypes:eO,tooltipPayloadSearcher:eE.arrayTooltipSearcher,categoricalChartProps:e,ref:t}));function eP({active:e,payload:i}){if(!e||!i||0===i.length)return null;let n=i[0].payload;return(0,t.jsxs)("div",{className:"rounded-xl border border-zinc-700 bg-zinc-900 p-3 text-xs text-zinc-100 shadow-md",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"text-zinc-400",children:"Cluster:"})," ",n.clusterId]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"text-zinc-400",children:"Competition:"})," ",n.competitionIndex.toFixed(2)]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"text-zinc-400",children:"Opportunity:"})," ",n.opportunityScore.toFixed(2)]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"text-zinc-400",children:"Surging:"})," ",n.isSurging?"Yes":"No"]})]})}function ek({clusters:e,onPointClick:i}){if(0===e.length)return(0,t.jsxs)("div",{className:"rounded-xl border border-zinc-800 bg-zinc-900 p-6",children:[(0,t.jsx)("h3",{className:"text-base font-medium text-zinc-100",children:"Competition vs Opportunity"}),(0,t.jsx)("div",{className:"mt-4 flex h-56 items-center justify-center rounded-xl border border-dashed border-zinc-700",children:(0,t.jsx)("span",{className:"text-sm text-zinc-500",children:"No cluster positioning data"})})]});let n=e.map(e=>({clusterId:e.clusterId,competitionIndex:e.competitionIndex,opportunityScore:e.opportunityScore,isSurging:e.isSurging})),r=n.reduce((e,t)=>e+t.competitionIndex,0)/n.length,a=n.reduce((e,t)=>e+t.opportunityScore,0)/n.length,l=Math.min(...n.map(e=>e.competitionIndex)),u=Math.max(...n.map(e=>e.competitionIndex));n.map(e=>e.opportunityScore),n.map(e=>e.opportunityScore);let p=Math.max(1,(u-l)*.1);return(0,t.jsxs)("div",{className:"rounded-xl border border-zinc-800 bg-zinc-900 p-6",children:[(0,t.jsx)("h3",{className:"text-base font-medium text-zinc-100",children:"Competition vs Opportunity"}),(0,t.jsx)("div",{className:"mt-4 h-56",children:(0,t.jsx)(s.ResponsiveContainer,{height:"100%",width:"100%",children:(0,t.jsxs)(eC,{margin:{top:8,right:12,left:0,bottom:8},children:[(0,t.jsx)(x.CartesianGrid,{stroke:"#3F3F46",strokeDasharray:"3 3"}),(0,t.jsx)(c.XAxis,{axisLine:{stroke:"#3F3F46"},dataKey:"competitionIndex",name:"Competition Index",tick:{fill:"#A1A1AA",fontSize:12},tickLine:!1,type:"number"}),(0,t.jsx)(d.YAxis,{axisLine:{stroke:"#3F3F46"},dataKey:"opportunityScore",name:"Opportunity Score",tick:{fill:"#A1A1AA",fontSize:12},tickLine:!1,type:"number"}),(0,t.jsx)(M,{stroke:"#52525B",strokeDasharray:"4 4",x:r}),(0,t.jsx)(M,{stroke:"#52525B",strokeDasharray:"4 4",y:a}),(0,t.jsx)(o.Tooltip,{content:(0,t.jsx)(eP,{}),cursor:{stroke:"#52525B"}}),(0,t.jsx)(ew,{data:n,name:"Clusters",children:n.map((n,r)=>(0,t.jsx)(m.Cell,{fill:n.isSurging?"#4F7CFF":"#A1A1AA",onClick:()=>i?.(e[r])},`${n.clusterId}-${n.competitionIndex}-${n.opportunityScore}`))}),(0,t.jsx)("text",{fill:"#71717A",fontSize:11,x:`${(r-(l-p))/(u-l+2*p)*50-2}%`,y:18,children:"Expansion Zone"}),(0,t.jsx)("text",{fill:"#71717A",fontSize:11,textAnchor:"end",x:`${(r-(l-p))/(u-l+2*p)*50+52}%`,y:18,children:"Competitive Hot Zone"}),(0,t.jsx)("text",{fill:"#71717A",fontSize:11,x:`${(r-(l-p))/(u-l+2*p)*50-2}%`,y:"92%",children:"Dormant"}),(0,t.jsx)("text",{fill:"#71717A",fontSize:11,textAnchor:"end",x:`${(r-(l-p))/(u-l+2*p)*50+52}%`,y:"92%",children:"Saturated"})]})})}),(0,t.jsxs)("div",{className:"mt-2 flex items-center justify-between text-xs text-zinc-500",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("span",{className:"inline-flex items-center gap-1.5",children:[(0,t.jsx)("span",{className:"h-2.5 w-2.5 rounded-full bg-[#4F7CFF]"}),"Surging"]}),(0,t.jsxs)("span",{className:"inline-flex items-center gap-1.5",children:[(0,t.jsx)("span",{className:"h-2.5 w-2.5 rounded-full bg-[#A1A1AA]"}),"Normal"]})]}),(0,t.jsx)("span",{children:"Opportunity Score vs Competition"})]})]})}function eD({cluster:e,onClose:n}){let r,a,l,s,o=null!==e;return(0,i.useEffect)(()=>{if(o)return document.body.classList.add("overflow-hidden"),()=>{document.body.classList.remove("overflow-hidden")};document.body.classList.remove("overflow-hidden")},[o]),(0,t.jsxs)("div",{className:`fixed inset-0 z-50 flex justify-end transition-opacity duration-300 ${o?"pointer-events-auto":"pointer-events-none"}`,children:[(0,t.jsx)("button",{"aria-label":"Close cluster detail drawer",className:`absolute inset-0 bg-black/40 backdrop-blur-sm transition-opacity duration-300 ease-in-out ${o?"opacity-100":"pointer-events-none opacity-0"}`,onClick:n,type:"button"}),(0,t.jsxs)("aside",{className:`fixed right-0 top-0 z-50 h-full w-full border-l border-zinc-800 bg-zinc-950 p-6 transition-transform duration-300 ease-in-out sm:w-[420px] ${o?"translate-x-0":"translate-x-full"}`,children:[(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-zinc-100",children:"Cluster Details"}),(0,t.jsx)("button",{"aria-label":"Close drawer",className:"rounded-lg border border-zinc-700 px-2 py-1 text-sm text-zinc-300 transition hover:bg-zinc-800 hover:text-white",onClick:n,type:"button",children:"Close"})]}),e?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"mt-6 space-y-3 text-sm text-zinc-300",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"text-zinc-500",children:"Cluster ID:"})," ",e.clusterId]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"text-zinc-500",children:"Current Demand Score:"})," ",e.currentDemandScore.toFixed(2)]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"text-zinc-500",children:"Previous Demand Score:"})," ",e.previousDemandScore.toFixed(2)]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"text-zinc-500",children:"Growth %:"})," ",e.growthRate.toFixed(2),"%"]}),(0,t.jsxs)("p",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-zinc-500",children:"Surging:"}),(0,t.jsx)("span",{className:`inline-flex rounded-full px-2 py-0.5 text-xs ${e.isSurging?"bg-[#4F7CFF]/20 text-[#4F7CFF]":"bg-zinc-800 text-zinc-300"}`,children:e.isSurging?"Yes":"No"})]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"text-zinc-500",children:"Competition Index:"})," ",e.competitionIndex.toFixed(2)]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"text-zinc-500",children:"Opportunity Score:"})," ",e.opportunityScore.toFixed(2)]})]}),(0,t.jsxs)("div",{className:"mt-6 rounded-xl border border-zinc-800 bg-zinc-900 p-4",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-zinc-100",children:"Recommendation"}),(0,t.jsx)("p",{className:"mt-2 text-sm text-zinc-400",children:(r=e.opportunityScore>=10,a=e.competitionIndex<=5,l=e.currentDemandScore>=20,s=e.competitionIndex>10,r&&a?"High opportunity zone. Consider vendor expansion.":s&&l?"High demand but competitive market.":"Moderate market activity.")})]})]}):null]})]})}let eT=(0,e.i(70703).default)(()=>e.A(78423),{loadableGenerated:{modules:[10865]},ssr:!1});function eL(e,t){return e>t?"up":e<t?"down":"flat"}function eM(e){return"up"===e?{arrow:"↑",className:"text-[#30D158]"}:"down"===e?{arrow:"↓",className:"text-[#FF453A]"}:{arrow:"→",className:"text-zinc-400"}}function eK(){let{days:e}=(0,n.useDashboardFilters)(),[r,a]=(0,i.useState)([]),[l,s]=(0,i.useState)(!0),[o,c]=(0,i.useState)(null),[d,x]=(0,i.useState)(null);(0,i.useEffect)(()=>{!async function(){try{s(!0);let t=await fetch(`/api/analytics/cluster-intelligence?days=${e}`);if(!t.ok)throw Error("Failed to fetch intelligence data");let i=await t.json();a(i.clusters??[]),c(null)}catch{c("Failed to load intelligence data")}finally{s(!1)}}()},[e]);let m=r.length,p=r.filter(e=>e.isSurging).length,h=r.length>0?r.reduce((e,t)=>e+t.opportunityScore,0)/r.length:0,y=r.length>0?r.reduce((e,t)=>e+t.previousDemandScore/(t.competitionIndex+1),0)/r.length:0,f=r.filter(e=>e.competitionIndex>5).length,v=eL(p,r.filter(e=>e.previousDemandScore>=20).length),g=eL(h,y),b=eM(v),j=eM(g),A=h>=10?"text-[#30D158]":"text-white",N=f>0?"text-[#FF453A]":"text-white";return(0,t.jsxs)("div",{className:"px-6 py-8",children:[l?(0,t.jsx)("p",{className:"mb-6 text-sm text-zinc-400",children:"Loading intelligence..."}):null,o?(0,t.jsx)("p",{className:"mb-6 text-sm text-[#FF453A]",children:o}):null,(0,t.jsxs)("section",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-4",children:[(0,t.jsxs)("div",{className:"animate-fade-in rounded-xl border border-zinc-800 bg-zinc-900 p-6 shadow-sm transition-transform duration-200 ease-out hover:scale-[1.02] hover:shadow-lg",children:[(0,t.jsx)("p",{className:"text-sm text-zinc-400",children:"Total Clusters"}),(0,t.jsx)("p",{className:"mt-3 text-4xl font-bold text-white",children:m}),(0,t.jsx)("p",{className:"mt-2 text-xs text-zinc-400",children:"+12% vs last period"})]}),(0,t.jsxs)("div",{className:"animate-fade-in delay-75 rounded-xl border border-zinc-800 bg-zinc-900 p-6 shadow-sm transition-transform duration-200 ease-out hover:scale-[1.02] hover:shadow-lg",children:[(0,t.jsx)("p",{className:"text-sm text-zinc-400",children:"Surging Zones"}),(0,t.jsxs)("div",{className:"mt-3 flex items-center gap-2",children:[(0,t.jsx)("p",{className:"text-4xl font-bold text-white",children:p}),(0,t.jsx)("span",{className:`text-lg font-semibold ${b.className}`,children:b.arrow})]}),(0,t.jsxs)("div",{className:"mt-2 inline-flex items-center gap-2 rounded-full bg-zinc-800 px-2 py-1 text-xs text-zinc-300",children:[(0,t.jsx)("span",{className:"h-2 w-2 rounded-full bg-[#4F7CFF]"}),(0,t.jsx)("span",{children:"Active now"})]})]}),(0,t.jsxs)("div",{className:"animate-fade-in delay-150 rounded-xl border border-zinc-800 bg-zinc-900 p-6 shadow-sm transition-transform duration-200 ease-out hover:scale-[1.02] hover:shadow-lg",children:[(0,t.jsx)("p",{className:"text-sm text-zinc-400",children:"Avg Opportunity Score"}),(0,t.jsxs)("div",{className:"mt-3 flex items-center gap-2",children:[(0,t.jsx)("p",{className:`text-4xl font-bold ${A}`,children:h.toFixed(1)}),(0,t.jsx)("span",{className:`text-lg font-semibold ${j.className}`,children:j.arrow})]}),(0,t.jsx)("div",{className:"mt-2 inline-flex items-center rounded-full bg-[#30D158]/20 px-2 py-1 text-xs text-[#30D158]",children:"Strong"})]}),(0,t.jsxs)("div",{className:"animate-fade-in delay-200 rounded-xl border border-zinc-800 bg-zinc-900 p-6 shadow-sm transition-transform duration-200 ease-out hover:scale-[1.02] hover:shadow-lg",children:[(0,t.jsx)("p",{className:"text-sm text-zinc-400",children:"High Competition Areas"}),(0,t.jsx)("p",{className:`mt-3 text-4xl font-bold ${N}`,children:f}),(0,t.jsx)("div",{className:"mt-2 inline-flex items-center rounded-full bg-[#FF453A]/20 px-2 py-1 text-xs text-[#FF453A]",children:"Watchlist"})]})]}),(0,t.jsxs)("section",{className:"mt-8",children:[(0,t.jsx)("h2",{className:"text-lg font-medium text-zinc-200",children:"Opportunity Heat Map"}),(0,t.jsx)("div",{className:"mt-4 rounded-xl border border-zinc-800 bg-zinc-900 p-6",children:(0,t.jsx)(eT,{days:e,onMarkerClick:x})})]}),(0,t.jsxs)("section",{className:"mt-8 grid grid-cols-1 gap-6 lg:grid-cols-2",children:[l?(0,t.jsxs)("div",{className:"rounded-xl border border-zinc-800 bg-zinc-900 p-6",children:[(0,t.jsx)("h3",{className:"text-base font-medium text-zinc-100",children:"Growth Trend"}),(0,t.jsx)("div",{className:"mt-4 flex h-56 items-center justify-center rounded-xl border border-dashed border-zinc-700",children:(0,t.jsx)("span",{className:"text-sm text-zinc-500",children:"Loading growth chart..."})})]}):(0,t.jsx)(u,{days:e,clusters:r}),(0,t.jsx)(ek,{clusters:r,onPointClick:x})]}),(0,t.jsx)(eD,{cluster:d,onClose:()=>x(null)})]})}e.s(["default",()=>eK],30257)}]);