(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,43817,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(43037);function l(){let[e,l]=(0,r.useState)([]),[n,i]=(0,r.useState)(!0),[a,d]=(0,r.useState)(null),[c,o]=(0,r.useState)(""),[u,x]=(0,r.useState)(""),[m,h]=(0,r.useState)(""),[p,b]=(0,r.useState)(!1),[g,j]=(0,r.useState)(new Set),[f,y]=(0,r.useState)(!1),N=e.length>0,k=(0,r.useMemo)(()=>{let e=c.trim(),t=Number(u),r=Number(m);return e?!Number.isFinite(t)||t<=0?"Price must be greater than 0.":Number.isFinite(r)&&!(r<0)&&Number.isInteger(r)?null:"Stock must be a whole number 0 or greater.":"Product name is required."},[c,u,m]),w=(0,r.useCallback)(async()=>{try{i(!0),d(null);let e=await (0,s.authFetch)("/api/vendor/products"),t=await e.json();if(!e.ok)throw Error(t.message??"Failed to load products.");l(Array.isArray(t.products)?t.products:[])}catch(e){d(e instanceof Error?e.message:"Unable to load products right now.")}finally{i(!1)}},[]);async function v(e){if(e.preventDefault(),k)return void d(k);try{b(!0),d(null);let e=await (0,s.authFetch)("/api/vendor/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:c.trim(),price:Number(u),stock:Number(m)})}),t=await e.json();if(!e.ok)throw Error(t.message??"Failed to create product.");o(""),x(""),h(""),await w()}catch(e){d(e instanceof Error?e.message:"Unable to create product right now.")}finally{b(!1)}}async function F(e){try{j(t=>{let r=new Set(t);return r.add(e),r}),d(null);let t=await (0,s.authFetch)(`/api/vendor/products/${e}`,{method:"DELETE"}),r=await t.json();if(!t.ok)throw Error(r.message??"Failed to delete product.");await w()}catch(e){d(e instanceof Error?e.message:"Unable to delete product right now.")}finally{j(t=>{let r=new Set(t);return r.delete(e),r})}}return(0,r.useEffect)(()=>{w()},[w]),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,t.jsx)("h1",{className:"text-5xl font-bold tracking-tight md:text-6xl",children:"Products"}),(0,t.jsx)("button",{className:"rounded-2xl bg-[#4F7CFF] px-6 py-3 text-2xl font-semibold text-white transition hover:bg-[#3f6ef2]",onClick:()=>y(e=>!e),type:"button",children:"+ Add Product"})]}),f?(0,t.jsxs)("section",{className:"rounded-2xl border border-zinc-800 bg-zinc-900/90 p-6",children:[(0,t.jsx)("h2",{className:"text-3xl font-semibold",children:"Add Product"}),(0,t.jsxs)("form",{className:"mt-5 grid grid-cols-1 gap-4 md:grid-cols-4",onSubmit:v,children:[(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)("label",{className:"mb-1 block text-lg text-zinc-300",htmlFor:"product-name",children:"Name"}),(0,t.jsx)("input",{className:"w-full rounded-xl border border-zinc-700 bg-black px-4 py-3 text-xl text-white outline-none ring-[#4F7CFF] focus:ring-2",id:"product-name",onChange:e=>o(e.target.value),placeholder:"Fresh Organic Avocados",required:!0,type:"text",value:c})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"mb-1 block text-lg text-zinc-300",htmlFor:"product-price",children:"Price"}),(0,t.jsx)("input",{className:"w-full rounded-xl border border-zinc-700 bg-black px-4 py-3 text-xl text-white outline-none ring-[#4F7CFF] focus:ring-2",id:"product-price",min:"0.01",onChange:e=>x(e.target.value),required:!0,step:"0.01",type:"number",value:u})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"mb-1 block text-lg text-zinc-300",htmlFor:"product-stock",children:"Stock"}),(0,t.jsx)("input",{className:"w-full rounded-xl border border-zinc-700 bg-black px-4 py-3 text-xl text-white outline-none ring-[#4F7CFF] focus:ring-2",id:"product-stock",min:"0",onChange:e=>h(e.target.value),required:!0,step:"1",type:"number",value:m})]}),(0,t.jsx)("div",{className:"md:col-span-4",children:(0,t.jsx)("button",{className:"rounded-xl bg-[#4F7CFF] px-5 py-3 text-xl font-semibold text-white transition hover:bg-[#3f6ef2] disabled:opacity-60",disabled:p,type:"submit",children:p?"Adding Product...":"Save Product"})})]})]}):null,(0,t.jsx)("section",{className:"overflow-hidden rounded-3xl border border-zinc-800 bg-zinc-900/90",children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full text-xl",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b border-zinc-800 text-zinc-400",children:[(0,t.jsx)("th",{className:"px-7 py-5 text-left font-medium",children:"Product"}),(0,t.jsx)("th",{className:"px-7 py-5 text-left font-medium",children:"Category"}),(0,t.jsx)("th",{className:"px-7 py-5 text-left font-medium",children:"Price"}),(0,t.jsx)("th",{className:"px-7 py-5 text-left font-medium",children:"Stock"}),(0,t.jsx)("th",{className:"px-7 py-5 text-left font-medium",children:"Status"}),(0,t.jsx)("th",{className:"px-7 py-5 text-right font-medium",children:"Actions"})]})}),(0,t.jsx)("tbody",{children:n?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{className:"px-7 py-6 text-zinc-300",colSpan:6,children:"Loading products..."})}):N?e.map(e=>{let r,s=g.has(e.id),l=e.stock<20,n=(r=e.name.toLowerCase()).includes("bread")?"Bakery":r.includes("egg")||r.includes("milk")?"Dairy":r.includes("coffee")||r.includes("drink")?"Beverages":"Produce";return(0,t.jsxs)("tr",{className:"border-b border-zinc-800/70",children:[(0,t.jsx)("td",{className:"px-7 py-6",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("span",{className:"inline-flex h-12 w-12 items-center justify-center rounded-xl bg-zinc-800 text-blue-400",children:(0,t.jsxs)("svg",{"aria-hidden":"true",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("path",{d:"M12 3L20 7.5V16.5L12 21L4 16.5V7.5L12 3Z",stroke:"currentColor",strokeLinejoin:"round",strokeWidth:"1.5"}),(0,t.jsx)("path",{d:"M12 12L20 7.5",stroke:"currentColor",strokeWidth:"1.5"}),(0,t.jsx)("path",{d:"M12 12L4 7.5",stroke:"currentColor",strokeWidth:"1.5"}),(0,t.jsx)("path",{d:"M12 12V21",stroke:"currentColor",strokeWidth:"1.5"})]})}),(0,t.jsx)("span",{className:"font-semibold text-zinc-100",children:e.name})]})}),(0,t.jsx)("td",{className:"px-7 py-6 text-zinc-400",children:n}),(0,t.jsxs)("td",{className:"px-7 py-6 font-semibold text-zinc-100",children:["$",e.price.toFixed(2)]}),(0,t.jsx)("td",{className:"px-7 py-6 text-zinc-100",children:e.stock}),(0,t.jsx)("td",{className:"px-7 py-6",children:(0,t.jsx)("span",{className:`rounded-xl px-3 py-1 text-lg ${l?"bg-amber-950/60 text-amber-300":"bg-emerald-950/60 text-emerald-300"}`,children:l?"Low Stock":"In Stock"})}),(0,t.jsxs)("td",{className:"px-7 py-6 text-right",children:[(0,t.jsx)("button",{className:"rounded-lg px-3 py-1.5 text-lg text-blue-400 transition hover:bg-zinc-800",type:"button",children:"âœ"}),(0,t.jsx)("button",{className:"rounded-lg px-3 py-1.5 text-lg text-red-400 transition hover:bg-zinc-800 disabled:opacity-50",disabled:s,onClick:()=>void F(e.id),type:"button",children:s?"...":"ğŸ—‘"})]})]},e.id)}):(0,t.jsx)("tr",{children:(0,t.jsx)("td",{className:"px-7 py-6 text-zinc-400",colSpan:6,children:"No products yet."})})})]})})}),a?(0,t.jsx)("div",{className:"rounded-xl border border-red-900/40 bg-red-950/20 p-4 text-red-300",children:a}):null]})}e.s(["default",()=>l])}]);